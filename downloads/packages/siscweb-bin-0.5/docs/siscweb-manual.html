<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>SISCweb Manual</title><link href="siscweb-manual.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.70.1" name="generator" /></head><body><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="siscweb-manual" />SISCweb Manual</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Alessandro</span> <span class="surname">Colomba</span></h3></div></div><div><p class="copyright">Copyright © 2005-2007 Alessandro Colomba</p></div><div><div class="legalnotice"><a id="N10012" /><p>
    This documentation is free software; you can redistribute it
    and/or modify it under the terms of the GNU General Public License
    as published by the Free Software Foundation; either version 2 of
    the License, or (at your option) any later version.
  </p><p>
    The source code refers to the DocBook XML source files.  The
    object code refers to the generated HTML, PostScript, PDF, and
    other forms.
  </p><p>
    This documentation is distributed in the hope that it will be
    useful, but WITHOUT ANY WARRANTY; without even the implied
    warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the GNU General Public License for more details.
  </p><p>
    You should have received a copy of the GNU General Public License
    (in <a href="#gpl" title="Appendix A. GNU General Public License">Appendix A, <i>GNU General Public License</i></a>) along with this documentation; if not,
    write to the Free Software Foundation, Inc., 59 Temple Place,
    Suite 330, Boston, MA 02111-1307 USA
  </p></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#features">Features</a></span></dt><dt><span class="section"><a href="#license">License</a></span></dt><dt><span class="section"><a href="#credits">Credits</a></span></dt><dt><span class="section"><a href="#contact">Contact Information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#requirements">Requirements</a></span></dt><dt><span class="section"><a href="#components">Components</a></span></dt><dt><span class="section"><a href="#configuration">Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#context-parameters">Context Parameters</a></span></dt><dt><span class="section"><a href="#adapter-servlet">The Adapter Servlet</a></span></dt><dt><span class="section"><a href="#sisc-params">SISC Configuration Parameters</a></span></dt></dl></dd><dt><span class="section"><a href="#env-entries">Environment Entries</a></span></dt><dd><dl><dt><span class="section"><a href="#env-repl">REPL Entries</a></span></dt><dt><span class="section"><a href="#env-logging">Logging Entries</a></span></dt><dt><span class="section"><a href="#env-contcentric">Continuation Manager Entries</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#pages">3. Generating content</a></span></dt><dd><dl><dt><span class="section"><a href="#markup">Markup</a></span></dt><dd><dl><dt><span class="section"><a href="#send-html">(X)HTML Core Procedures</a></span></dt><dt><span class="section"><a href="#send-xml">XML Core Procedures</a></span></dt><dt><span class="section"><a href="#sxml">Extended SXML</a></span></dt><dt><span class="section"><a href="#ehtml">Extended HTML markup</a></span></dt></dl></dd><dt><span class="section"><a href="#send-text">Plain Text</a></span></dt><dt><span class="section"><a href="#forward">Forwarding Requests</a></span></dt><dt><span class="section"><a href="#image">Images</a></span></dt><dt><span class="section"><a href="#graphviz">GraphViz Graphs</a></span></dt><dd><dl><dt><span class="section"><a href="#send-graphviz">Graphviz Procedures</a></span></dt><dt><span class="section"><a href="#dotml">DotML</a></span></dt></dl></dd><dt><span class="section"><a href="#errors">HTTP errors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#state">4. Managing Program State</a></span></dt><dd><dl><dt><span class="section"><a href="#stateful">Introduction to Statefulness</a></span></dt><dd><dl><dt><span class="section"><a href="#state-traditional">State in Traditional Web Applications</a></span></dt><dt><span class="section"><a href="#state-continuation">Continuations and State</a></span></dt><dt><span class="section"><a href="#state-finer">Finer Statefulness</a></span></dt></dl></dd><dt><span class="section"><a href="#parameters">State with SRFI-39 Parameter Objects</a></span></dt><dt><span class="section"><a href="#webcells">State with Web Cells</a></span></dt><dt><span class="section"><a href="#session-parameters">State with the Session Object</a></span></dt></dl></dd><dt><span class="chapter"><a href="#publishing">5. Publishing Procedures</a></span></dt><dd><dl><dt><span class="section"><a href="#html">Publishing Procedures</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bindings">6. Request Bindings</a></span></dt><dd><dl><dt><span class="section"><a href="#extracting-bindings">Extracting Bindings</a></span></dt><dt><span class="section"><a href="#bindings-java">Extracting Bindings from Java</a></span></dt><dt><span class="section"><a href="#security-bindings">Bindings and Security</a></span></dt></dl></dd><dt><span class="chapter"><a href="#sql">7. Interaction with SQL Databases</a></span></dt><dd><dl><dt><span class="section"><a href="#jdbc">JDBC Functions</a></span></dt><dt><span class="section"><a href="#queries">Running Queries</a></span></dt><dt><span class="section"><a href="#vendors">Database Vendor Support </a></span></dt><dd><dl><dt><span class="section"><a href="#hsqldb">HSQLDB</a></span></dt><dt><span class="section"><a href="#postgresql">Microsoft SQL Server Support</a></span></dt><dt><span class="section"><a href="#oracle">Oracle</a></span></dt><dt><span class="section"><a href="#postgresql">PostgreSQL</a></span></dt><dt><span class="section"><a href="#otherdb">Adding Support for Other Vendors</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#lowlev">8. Lower-level APIs</a></span></dt><dd><dl><dt><span class="section"><a href="#request">Request Procedures</a></span></dt><dt><span class="section"><a href="#response">Response Procedures</a></span></dt><dt><span class="section"><a href="#session">Session Procedures</a></span></dt><dt><span class="section"><a href="#context">ServletContext Procedures</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gpl">A. GNU General Public License</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gpl-1">Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">How to Apply These Terms to Your New Programs
    </a></span></dt></dl></dd><dt><span class="index"><a href="#index">Index</a></span></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>2.1. <a href="#env-repl-list">REPL-related environment entries</a></dt><dt>2.2. <a href="#env-repl-list">Log-related environment entries</a></dt><dt>2.3. <a href="#env-repl-list">Continuation management environment entries</a></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="introduction" />Chapter 1. Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#features">Features</a></span></dt><dt><span class="section"><a href="#license">License</a></span></dt><dt><span class="section"><a href="#credits">Credits</a></span></dt><dt><span class="section"><a href="#contact">Contact Information</a></span></dt></dl></div><p>
    <span class="application">SISCweb</span> is a framework to facilitate writing stateful
    Scheme web applications in J2EE environments.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="features" />Features</h2></div></div></div><p>
      <span class="application">SISCweb</span> sports an interactive, REPL-based web application
      development style. Developers can write applications
      interactively, without ever restarting the context, and, insofar as
      it is desirable, without ever losing application state. (In
      fact, save for the Java portion, <span class="application">SISCweb</span> itself is developed
      interactively in its own REPL.)
    </p><p>
      Through the use of continuations, <span class="application">SISCweb</span> does away with the
      page-centric execution model typical of web applications (see

      <sup>[<a href="#ftn.N1003C" id="N1003C">1</a>]</sup>.)

      Every time a response is sent to the browser, the program
      execution flow is suspended, to be then resumed from that exact
      point when the browser submits a request. Some consequences of
      this approach are:
    </p><div class="itemizedlist"><ul type="disc"><li>
        Programs are more easily structured around their problem
        domain rather than their presentation.
      </li><li>
        Developers are mostly freed from having to manually manage the
        lifecycle of objects in the session. The need to to store
        objects in the session is greatly reduced because when the
        browser submits a request, and the program's execution flow is
        resumed, all the language-level variables that were in scope
        are again available.
      </li><li>
        Thanks to <span class="application">SISC</span>'s serializable continuations, accumulated
        program state is transparent to server restarts.
      </li><li>
        Programs can be made resilient to page reloads and browser
        window cloning with much less effort.
      </li><li>
        An extra security layer is added because URLs (which now
        encode a reference to program state) cannot easily be
        manipulated, hidden form variables are not needed anymore, and
        in general the automatic state management in <span class="application">SISCweb</span> should
        be more difficult to hack than the ad-hoc solutions developers
        are forced to implement in traditional web frameworks.
        </li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        This document is a work-in-progress. Readers not familiar with
        other Scheme web frameworks might want to also read through
        the documentation of more mature implementations:

        <div class="itemizedlist"><ul type="disc"><li>
            PLT web server:
            <a href="http://docs.plt-scheme.org/web-server/web-server.html" target="_top">http://docs.plt-scheme.org/web-server/web-server.html</a></li><li>
            SUrflet server:
            <a href="http://www.scsh.net/resources/sunet-manual/man-Z-H-8.html#node_chap_6" target="_top">http://www.scsh.net/resources/sunet-manual/man-Z-H-8.html#node_chap_6</a></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="license" />License</h2></div></div></div><p>
      <span class="application">SISCweb</span> is open-source software licensed under the <a href="http://www.mozilla.org/MPL/MPL-1.1.html" target="_top">MPL</a>, the
      <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>,
      and the <a href="http://www.gnu.org/copyleft/lgpl.html" target="_top">LGPL</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="credits" />Credits</h2></div></div></div><p>
      <span class="application">SISCweb</span> is based on <span class="application">SISC</span> (<a href="http://sisc.sourceforge.net/" target="_top">http://sisc.sourceforge.net/</a>), a Scheme interpreter for
      the JVM with full continuations, and is heavily influenced by
      other Lisp web frameworks:
    </p><div class="itemizedlist"><ul type="disc"><li>
        The PLT web server collection:
        <a href="http://download.plt-scheme.org/scheme/docs/html/web-server/" target="_top">http://download.plt-scheme.org/scheme/docs/html/web-server/</a></li><li>
        SUnet:
        <a href="http://www.scsh.net/resources/sunet.html" target="_top">http://www.scsh.net/resources/sunet.html</a></li><li>
        AllegroServe:
        <a href="http://allegroserve.sourceforge.net" target="_top">http://allegroserve.sourceforge.net</a></li></ul></div><p>
      A couple of initial design decisions were also lifted from
      Matthias Radestock's servlet code in the contrib section of the
      SISC CVS tree.
    </p><p>
      Also special thanks to Anton van Straaten, Dominique Boucher,
      Ben Simon, Dan Muresan, Felix Klock and Tony Garnock-Jones for
      bug reports, suggestions, and/or work in support of <span class="application">SISCweb</span>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="contact" />Contact Information</h2></div></div></div><p>
      Comments, ideas, and bug reports are welcome at:
      <code class="email">&lt;<a href="mailto:acolomba@users.sourceforge.net">acolomba@users.sourceforge.net</a>&gt;</code>
    </p></div><div class="footnotes"><br /><hr align="left" width="100" /><div class="footnote"><p><sup>[<a href="#N1003C" id="ftn.N1003C">1</a>] </sup>
          Christian Queinnec. "Inverting back the inversion of
          control or, continuations versus page-centric
          programming". Technical Report 7, LIP6. May
          2001. (<a href="http://www-spi.lip6.fr/~queinnec/Papers/www.ps.gz" target="_top">
          http://www-spi.lip6.fr/~queinnec/Papers/www.ps.gz </a>)
        </p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="install" />Chapter 2. Installation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#requirements">Requirements</a></span></dt><dt><span class="section"><a href="#components">Components</a></span></dt><dt><span class="section"><a href="#configuration">Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#context-parameters">Context Parameters</a></span></dt><dt><span class="section"><a href="#adapter-servlet">The Adapter Servlet</a></span></dt><dt><span class="section"><a href="#sisc-params">SISC Configuration Parameters</a></span></dt></dl></dd><dt><span class="section"><a href="#env-entries">Environment Entries</a></span></dt><dd><dl><dt><span class="section"><a href="#env-repl">REPL Entries</a></span></dt><dt><span class="section"><a href="#env-logging">Logging Entries</a></span></dt><dt><span class="section"><a href="#env-contcentric">Continuation Manager Entries</a></span></dt></dl></dd></dl></div><p>
    Using <span class="application">SISCweb</span> in web applications is simple matter of including
    its components in the classpath and making some entries in the
    <code class="literal">web.xml</code> deployment descriptor.
  </p><p>
    First-time users may want to check out the example WAR file
    (siscweb-examples-[v].war). It can be deployed by simply dropping
    it into the deployment folder of a J2EE appserver, and can also be
    used as the starting point for developing a new application.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
      While the server-side REPL is disabled in the <span class="application">SISCweb</span> examples
      WAR file available from sourceforge.net, if you build it from
      sources, a REPL will be bound to the localhost:5156
      socket. <span class="emphasis"><em>This is a security vulnerability.</em></span>
      You should make sure to disable this feature if you are
      concerned about other people on the same host gaining access to
      a full-fledged REPL.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="requirements" />Requirements</h2></div></div></div><p>
      <span class="application">SISCweb</span> requires a J2EE 1.3 application server (Servlet
      spec. 2.3), Java 1.4 or later, and <span class="application">SISC</span> version 1.15.x or
      later. <span class="application">SISC</span> version 1.16.x or later is recommended.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="components" />Components</h2></div></div></div><p>
      <span class="application">SISCweb</span> is divided into different components:

      <div class="itemizedlist"><ul type="disc"><li><span class="emphasis"><em>siscweb.jar</em></span>: The <span class="application">SISCweb</span> core
          library manages continuations and provides functions to
          forward requests to other J2EE component.
          This is a mandatory component.
        </li><li><span class="emphasis"><em>siscweb-sxml.jar</em></span>: An add-on library to
          produce HTML/XHTML/XML pages and Graphviz graphs from SXML
          notation. (In the future it will also provide
          "recommended" SXML packages.)
        </li><li><span class="emphasis"><em>siscweb-sql.jar</em></span>: An add-on library
          providing a Scheme interface over JDBC. It supports a few
          database vendors, and more can be easily added through
          Scheme modules.
        </li></ul></div>

      The only required component is
      <code class="literal">siscweb.jar</code>. The desired components should be
      placed in the context's <code class="literal">WEB-INF/lib</code>.
    </p><p>
      The <span class="application">SISC</span> libraries, including the
      <code class="literal">sisc-heap.jar</code> file, should be also added to
      the load path. They are found in the <span class="application">SISC</span> binary distribution.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Starting from <span class="application">SISCweb</span> v0.5, the SISC libraries can be placed
        in a classpath common to multiple contexts (e.g. in an EAR
        root or in the application server's path).
      </p><p>
        The core <code class="literal">siscweb.jar</code> instead MUST be placed
        in the context's <code class="literal">WEB-INF/lib</code>. While
        <span class="application">SISCweb</span>'s critical data (e.g. the continuation table) is
        per-context, the logger and the configuration settings
        detailed below are (for now) in the Java static scope.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration" />Configuration</h2></div></div></div><p>
      <span class="application">SISCweb</span> requires a couple of context parameters and a listener
      in order to initialize. Besides that, the
      <code class="literal">SISCAdapterServlet</code> should be associated to
      the context path under which <span class="emphasis"><em>sisclets</em></span>
      (<span class="application">SISC</span> servlets) should be published.
    </p><p>
      Optionally, a number of environment entries are used to control
      various aspects of <span class="application">SISCweb</span>'s behavior and performance.
    </p><p>
      Beside <span class="application">SISCweb</span>-specific settings, it is also possible to specify
      <span class="application">SISC</span> parameters.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="context-parameters" />Context Parameters</h3></div></div></div><p>
        Two servlet context parameters,
        <code class="literal">siscweb.on-init-sexp</code> and
        <code class="literal">siscweb.on-destroy-sexp</code>, contain Scheme
        code executed respectively when the context is initialized and
        destroyed (i.e. during application server startup and
        shutdown, as well as during context restarts.)
      </p><p>
        The <code class="literal">siscweb.on-init-sexp</code>
        <span class="emphasis"><em>must</em></span> contain a line to load the
        <code class="literal">siscweb/sisclet</code> module in the Scheme
        toplevel. While <span class="application">SISCweb</span> could well do this implicitly, the
        current setup allows advanced users to substitute the module
        with an equivalent one.
      </p><p>
        The context parameters are read by a the <span class="application">SISCweb</span> J2EE
        listener, which must also be specified. The example below
        shows a typical configuration.
      </p><div class="informalexample"><pre class="programlisting">
          
&lt;context-param&gt;
  &lt;param-name&gt;siscweb.on-init-sexp&lt;/param-name&gt;
  &lt;param-value&gt;
    &lt;![CDATA[
      (require-extension (lib siscweb/sisclet))

    ;; replace round parentheses below with square ones in real life
    ))&gt;
  &lt;/param-value&gt;
&lt;/context-param&gt;

&lt;context-param&gt;
  &lt;param-name&gt;siscweb.on-destroy-sexp&lt;/param-name&gt;
  &lt;param-value&gt;
    &lt;![CDATA[
      ;; generally nothing to do

    ;; replace round parentheses below with square ones in real life
    ))&gt;
  &lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
  &lt;listener-class&gt;siscweb.web.SISCInitializer&lt;/listener-class&gt;
&lt;/listener&gt;
          
        </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="adapter-servlet" />The Adapter Servlet</h3></div></div></div><p>
        A Java adapter servlet allows the mapping of context paths to
        groups of sisclets. Sisclets are simply Scheme procedures
        associated through the publish mechanism (see <a href="#publishing" title="Chapter 5. Publishing Procedures">Chapter 5, <i>Publishing Procedures</i></a>) to paths <span class="emphasis"><em>below</em></span>
        that of the adapter servlet.
      </p><p>
        The adapter servlet accepts two parameters,
        <code class="literal">on-init-sexp</code> and
        <code class="literal">on-destroy-sexp</code>, which are invoked when the
        servlet is initialized and destroyed. As the example below
        shows, they are typically used to respectively publish and
        unpublish sisclets.
      </p><div class="informalexample"><pre class="programlisting">
          
&lt;servlet&gt;
  &lt;servlet-name&gt;examples&lt;/servlet-name&gt;
  &lt;description&gt;siscweb examples&lt;/description&gt;
  &lt;servlet-class&gt;siscweb.web.SISCAdapterServlet&lt;/servlet-class&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;on-init-sexp&lt;/param-name&gt;
    &lt;param-value&gt;
      &lt;![CDATA[
        ;; NOTE: scm/ is not generally a good place, since it is browsable
        (class-path-extension-append! '("scm/" "WEB-INF/scm/"))

        (require-extension (lib siscweb/publish))
        (require-extension (lib examples/hello-world))

        (publish "/hello/*" 'hello-world)

      ;; replace round parentheses below with square ones in real life
      ))&gt;
    &lt;/param-value&gt;
  &lt;/init-param&gt;
  &lt;init-param&gt;
    &lt;param-name&gt;on-destroy-sexp&lt;/param-name&gt;
    &lt;param-value&gt;
      &lt;![CDATA[
        (require-extension (lib siscweb/publish))

        (unpublish "/hello/*")
      ;; replace round parentheses with square in real life
      ))&gt;
    &lt;/param-value&gt;
  &lt;/init-param&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
  &lt;servlet-name&gt;examples&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/sisclets/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
          
        </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sisc-params" />SISC Configuration Parameters</h3></div></div></div><p>
        <span class="application">SISCweb</span> will initialize the <span class="application">SISC</span> interpreter with
        parameters loaded from the file
        <code class="literal">WEB-INF/sisc.properties</code> if present.  This
        is particularly useful for static parameters, but also
        convenient for dynamic parameters that are not changed by the
        application. Some often-used settings are:
      </p><div class="informalexample"><pre class="programlisting">
          
; max stack trace in case of errors
sisc.maxStackTraceDepth = 16

; web prompt
sisc.replPrompt = "W;&gt; "

; disable in production
sisc.stackTraceOnError = true
          
        </pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="env-entries" />Environment Entries</h2></div></div></div><p>
      Some aspects of <span class="application">SISCweb</span>'s inner workings can be controlled via
      a number of environment entries. The advantage of environment
      entries over Java properties or context parameters is that they
      can be usually changed through the application server's
      administrative console. This is especially useful because new
      values for a select environment entries are dynamically
      picked up within about one minute.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="env-repl" />REPL Entries</h3></div></div></div><p>
        Applications using <span class="application">SISCweb</span> can optionally provide a
        network-accessible Scheme REPL. This is particularly useful
        during development, and with precautions it can be an
        invaluable feature in the deployment environment as well.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The server-side REPL amounts to a no-login shell into a
          server, therefore it is highly advisable to at least bind it
          to the local interface only (i.e. localhost).
        </p><p>
          The REPL can then be made remotely accessible in a secure
          manner by establishing an SSH tunnel.
        </p></div><div class="table"><a id="env-repl-list" /><p class="title"><b>Table 2.1. REPL-related environment entries</b></p><div class="table-contents"><table summary="REPL-related environment entries" border="1"><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><thead><tr><th align="left">Name</th><th align="left">Values;Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code class="literal">siscweb/repl-p</code></td><td align="left">
                <code class="literal">true</code>|<code class="literal">false</code>;
                <code class="literal">java.lang.Boolean</code>
              </td><td align="left">
                Whether or not <span class="application">SISCweb</span> should bind a REPL to a
                network socket. Static, defaults to
                <code class="literal">false</code>.
              </td></tr><tr><td align="left"><code class="literal">siscweb/repl-host</code></td><td align="left">
                IP address (e.g. <code class="literal">127.0.0.1</code>);
                <code class="literal">java.lang.String</code>
              </td><td align="left">
                The network address to which the REPL should be
                bound. Static, defaults to <code class="literal">null</code>.
              </td></tr><tr><td align="left"><code class="literal">siscweb/repl-port</code></td><td align="left">
                Port number (e.g. <code class="literal">5156</code>);
                <code class="literal">java.lang.Integer</code>
              </td><td align="left">
                The port to which the REPL should be bound. Static,
                defaults to <code class="literal">0</code>.
              </td></tr></tbody></table></div></div><br class="table-break" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="env-logging" />Logging Entries</h3></div></div></div><p>
        <span class="application">SISCweb</span> logs its internal operations in order to aid
        troubleshooting.
      </p><div class="table"><a id="env-repl-list" /><p class="title"><b>Table 2.2. Log-related environment entries</b></p><div class="table-contents"><table summary="Log-related environment entries" border="1"><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><thead><tr><th align="left">Name</th><th align="left">Values;Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code class="literal">siscweb/logging-level</code></td><td align="left">
                <code class="literal">SEVERE</code>| <code class="literal">WARNING</code>|
                <code class="literal">INFO</code>| <code class="literal">CONFIG</code>|
                <code class="literal">FINE</code>| <code class="literal">FINER</code>|
                <code class="literal">FINEST</code>;
                <code class="literal">java.lang.String</code>
              </td><td align="left">
                The Java logging level that <span class="application">SISCweb</span> should adopt.
                Static, defaults to <code class="literal">INFO</code>.
              </td></tr><tr><td align="left"><code class="literal">siscweb/logging-file</code></td><td align="left">
                File path (e.g. <code class="literal">%t/siscweb.log</code>);
                <code class="literal">java.lang.String</code>
              </td><td align="left">
                A file path where <span class="application">SISCweb</span> should log its messages.
                Static, defaults to <code class="literal">null</code>, i.e. it
                logs to the application server's location.
              </td></tr><tr><td align="left"><code class="literal">siscweb/logging-limit</code></td><td align="left">
                <code class="literal">java.lang.Integer</code>
              </td><td align="left">
                The maximum number of bytes to write to the log
                file. Static, defaults to <code class="literal">5000000</code>.
              </td></tr><tr><td align="left"><code class="literal">siscweb/logging-count</code></td><td align="left">
                <code class="literal">java.lang.Integer</code>
              </td><td align="left">
                The maximum number of log files to rotate. Static,
                defaults to <code class="literal">1</code>.
              </td></tr></tbody></table></div></div><br class="table-break" /></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="env-contcentric" />Continuation Manager Entries</h3></div></div></div><p>
        <span class="application">SISCweb</span> stores and manages the lifecycle of the
        continuations corresponding to URLs through a pluggable
        class. This allows storing continuations in the Session object
        (recommended), databases, flat files, or user-defined storage.
      </p><div class="table"><a id="env-repl-list" /><p class="title"><b>Table 2.3. Continuation management environment entries</b></p><div class="table-contents"><table summary="Continuation management environment entries" border="1"><colgroup><col align="left" /><col align="left" /><col align="left" /></colgroup><thead><tr><th align="left">Name</th><th align="left">Domain</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><code class="literal">siscweb/continuation-ttl</code></td><td align="left">
                seconds; <code class="literal">java.lang.Long</code>
              </td><td align="left">
                New continuations will have the indicated time-to-live
                unless overridden via the
                <code class="function">adjust-timeout!</code> procedure.
                Dynamic, defaults to <code class="literal">1200</code> seconds.
              </td></tr><tr><td align="left"><code class="literal">siscweb/continuation-cleanup-interval</code></td><td align="left">
                milliseconds; <code class="literal">java.lang.Long</code>
              </td><td align="left">
                <span class="application">SISCweb</span> will remove expired continuations
                periodically according to the indicated
                interval. Dynamic, defaults to
                <code class="literal">30000</code>ms.
              </td></tr><tr><td align="left"><code class="literal">siscweb/continuation-group-creation-interval</code></td><td align="left">
                milliseconds; <code class="literal">java.lang.Long</code>
              </td><td align="left">
                This parameter can be used to limit the rate at which
                new continuation groups -- each group corresponds to a
                request --, are created for each session. A reasonable
                value will go unnoticed by human users, but assist
                against basic DoS attacks. Dynamic, defaults to
                <code class="literal">500</code>ms.
              </td></tr><tr><td align="left"><code class="literal">siscweb/user-history-size</code></td><td align="left">
                <code class="literal">java.lang.Integer</code>
              </td><td align="left">
                Technically the maximum number of continuation groups
                stored per user at any given time, in practice it
                amounts to the number of pages/requests in the user
                history for which continuations are still stored. If
                the maximum number is reached, the continuation group
                expiring the soonest is removed to make room for a new
                group. This parameter can be used to roughly bound the
                amount of resources devoted to each user. Dynamic,
                defaults to <code class="literal">50</code>.
              </td></tr><tr><td align="left"><code class="literal">siscweb/user-history-size-serialized</code></td><td align="left">
                <code class="literal">java.lang.Integer</code>
              </td><td align="left">
                When a user session is passified, only the indicated
                number of continuation groups is maintained. Dynamic,
                defaults to <code class="literal">10</code>.
              </td></tr></tbody></table></div></div><br class="table-break" /></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="pages" />Chapter 3. Generating content</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#markup">Markup</a></span></dt><dd><dl><dt><span class="section"><a href="#send-html">(X)HTML Core Procedures</a></span></dt><dt><span class="section"><a href="#send-xml">XML Core Procedures</a></span></dt><dt><span class="section"><a href="#sxml">Extended SXML</a></span></dt><dt><span class="section"><a href="#ehtml">Extended HTML markup</a></span></dt></dl></dd><dt><span class="section"><a href="#send-text">Plain Text</a></span></dt><dt><span class="section"><a href="#forward">Forwarding Requests</a></span></dt><dt><span class="section"><a href="#image">Images</a></span></dt><dt><span class="section"><a href="#graphviz">GraphViz Graphs</a></span></dt><dd><dl><dt><span class="section"><a href="#send-graphviz">Graphviz Procedures</a></span></dt><dt><span class="section"><a href="#dotml">DotML</a></span></dt></dl></dd><dt><span class="section"><a href="#errors">HTTP errors</a></span></dt></dl></div><p>
    <span class="application">SISCweb</span> programs can generate HTTP responses of a variety of
    data types -- HTML/XML/XHTML represented in SXML notation, images
    --, or they can forward requests to standard JSPs/Servlet
    components.  Procedures to generate HTTP errors are also
    available. Other response types can be easily plugged on top of a
    basic set of response procedures.
  </p><p>
    The procedures that produce HTTP responses are in the form
    <code class="function">send-*/*</code>, with the first pattern indicating
    the type of response, and the latter determining whether or not to
    save the execution state, and whether or not to clear previously
    saved states.
  </p><p>
    All the procedures accept an optional association list of HTTP
    response headers as the first, optional argument. The association
    list is in the form <em class="parameter"><code>((name value)
    ...)</code></em>. This can be used to override the default
    Content-Type, to set caching options, etc.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="markup" />Markup</h2></div></div></div><p>
      <span class="application">SISCweb</span> provides a number of modules with an uniform API to
      produce HTML, XHTML and XML markup. Their procedures accept
      documents in SXML syntax, and in the case of HTML and XHTML, a
      few extra elements and attributes are used to assist with
      continuation-based programming (see <a href="#ehtml" title="Extended HTML markup">the section called “Extended HTML markup”</a>.)
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="send-html" />(X)HTML Core Procedures</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>siscweb/html</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>siscweb/xhtml</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sxml.jar
        </strong></span>
      </p><p>
        The core procedures to send (X)HTML content follow the basic
        <code class="function">send-html/*</code> and
        <code class="function">send-xhtml/*</code> patterns. They differ in
        whether or not they clear the continuation table, and whether
        or not they return after the user interacts with the page.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The XHTML and HTML modules serialize SXML differently, with
          the former producing pure XML, and the latter producing
          markup tweaked to display properly in known browsers. When
          producing XHTML for common user agents, it is advisable to
          keep the <a href="#">HTML
          Compatibility Guidelines</a> in mind.
        </p><p>
          Also, while the XHTML module implements the complete SXML
          specification, the HTML module is more limited in that only
          understands DTD declarations,
          <code class="function">*VERBATIM*</code> and
          <code class="function">*COMMENT*</code> elements besides the basic
          element+attribute syntax. Also, while the XHTML module
          considers the <code class="function">*TOP*</code> element functional,
          the HTML module silently ignores it.
        </p></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10387" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-html/suspend</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>
          <br />
          <a class="indexterm" id="N103A4" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xhtml/suspend</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Sends the given SXML to the browser in the form of
              (X)HTML and suspends the execution flow. The
              <em class="parameter"><code>k-url</code></em> will contain a hash used to
              resume the program's execution, and should therefore be
              used in forms and links as needed. When the browser
              submits a request to the <em class="parameter"><code>k-url</code></em>,
              said request will become the return value of the
              procedure.
            </p></blockquote></div>
        </p></blockquote></div><div class="informalexample"><pre class="programlisting">
          
(let loop ((n 0))
  (send-html/suspend
    (lambda (k-url)
      `(html
         (body
           (a (@ (href ,k-url)) ,n)))))
  (loop (+ n 1)))
          
        </pre></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N103D2" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-html/forward</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>
          <br />
          <a class="indexterm" id="N103EF" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xhtml/forward</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>


          <div class="blockquote"><blockquote class="blockquote"><p>
              These procedures behave like
              <code class="function">send-html/suspend</code> and
              <code class="function">send-xhtml/suspend</code>, except that
              they clear the continuation table first. This will
              prevent the client from using the back button to resume
              the program flow from earlier points.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10419" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-html/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>
          <br />
          <a class="indexterm" id="N10436" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xhtml/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              These procedures send the provided SXML to the browser and stop.
            </p></blockquote></div>
        </p></blockquote></div><div class="informalexample"><pre class="programlisting">
(send-html/back
  `(html
    (body
      (a (@ (href "http://www.w3.org")) "w3c"))))
        </pre></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N1045C" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-html/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>
          <br />
          <a class="indexterm" id="N10479" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xhtml/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Like <code class="function">send-html/back</code> and
              <code class="function">send-html/back</code>, these procedures
              send the provided SXML to the browser and stop, but
              clear the continuation table first.
            </p></blockquote></div>
        </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="send-xml" />XML Core Procedures</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>siscweb/xml</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sxml.jar
        </strong></span>
      </p><p>
        This module provides functions to send XML responses with the
        same features as those in the HTML and XHTML modules. This
        enables clients to conduct a stateful conversation with the
        server. The same features available through the extended
        (X)HTML can be reproduced in any XML element by using the
        <code class="function">store/forward!</code> procedure described in
        <a href="#forward" title="Forwarding Requests">the section called “Forwarding Requests”</a>.
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N104C5" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xml/suspend</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>
          <br />
          <a class="indexterm" id="N104E2" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xml/forward</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;sxml&gt;)</span></span>) =&gt; <span class="type">request</span></code>
          <br />
          <a class="indexterm" id="N104FF" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xml/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>
          <br />
          <a class="indexterm" id="N1051C" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-xml/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;sxml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              These functions are analogous to those in the HTML and
              XHTML modules.
            </p></blockquote></div>
        </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sxml" />Extended SXML</h3></div></div></div><p>
        SISCweb's <code class="function">send-[html/xhtml/xml]/*</code>
        procedures accept a slightly extended version of the SXML
        syntax.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          The <code class="function">send-html/*</code> procedures transform
          symbols in the markup into entities. This usage is now
          deprecated, and the form <code class="function">(&amp; name)</code>
          should be used instead for HTML, XHTML and XML.
        </p></div><div class="informalexample"><pre class="programlisting">
          
(send-html/back
  `(html
    (body
     (p "Can't" (&amp; nbsp) "wrap" (&amp; nbsp) "me.")
     (p "Nor" (&amp; |#160|) "me."))))
          
        </pre></div><p>
        Numbers in attributes and text nodes are automatically
        converted to strings using <code class="function">pretty-print</code>.
      </p><div class="informalexample"><pre class="programlisting">
(send-html/back
  `(html
    (body
     (table (@ (width 42))
       (tr (td 42))))))
        </pre></div><p>
        The value #f as an element or attribute value is
        ignored. This comes handy when generating dynamic content.
      </p><div class="informalexample"><pre class="programlisting">
;; equivalent to (html (body (p)))
(send-html/back
  `(html
    (body
     (p (@ (align #f))
      ,(hashtable/get ht 'para)))))
        </pre></div><p>
        The element *VERBATIM* can be used to produce non-escaped text.
      </p><div class="informalexample"><pre class="programlisting">
          
(send-html/back
  `(*VERBATIM*
    "&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello, &amp;quot;world&amp;quot;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;))
          
        </pre></div><p>
        The elements *DTD-INFO* and *DTD-INFO/PUBLIC* can be used to
        generate DTD declarations. For XML/XHTML only, the *PI*
        element should be used to generate the XML declaration.
      </p><div class="informalexample"><pre class="programlisting">
          
(send-xhtml/back
 `(*TOP*
   (*PI* xml "version=\"1.0\"")
   (*DTD-INFO/PUBLIC* "html"
                      "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd")
   (html (@ (xmlns "http://www.w3.org/1999/xhtml")
            (xml:lang "en") (lang "en"))
    (head
     (title "Hello"))
    (body
     (p "Hello")))))
          
        </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ehtml" />Extended HTML markup</h3></div></div></div><p>
        The HTML and XHTML modules support a number of extra
        attributes to support continuation-centric programming and
        interaction with the J2EE environment.
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10579" />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(a (@ (bindings ,binding-alist [(anchor name)]...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(form (@ (bindings ,binding-alist) [(anchor name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(iframe (@ (bindings ,binding-alist) [(anchor name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(img (@ (bindings ,binding-alist) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(link (@ (bindings ,binding-alist) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(object (@ (bindings ,binding-alist) [(anchor name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(script (@ (bindings ,binding-alist) ...) ...)</code>
          <div class="blockquote"><blockquote class="blockquote"><p>
              This syntax is only usable from the
              <code class="function">*/suspend</code> and
              <code class="function">*/forward</code> procedures. It will
              produce a link that, when followed, will bind the given
              bindings to the request object returned by these two
              functions. The <em class="parameter"><code>binding-alist</code></em> is
              in the format specified in <a href="#bindings" title="Chapter 6. Request Bindings">Chapter 6, <i>Request Bindings</i></a>.
            </p><p>
              The optional <em class="parameter"><code>anchor</code></em> attribute allowed by some
              of the elements is made part of the generated URL.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N105D7" />
          <a class="indexterm" id="N105DC" />
          <a class="indexterm" id="N105E1" />
          <a class="indexterm" id="N105E6" />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(a (@ (href-p ,proc) [(bindings ,binding-alist)] [(anchor ,name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(form (@ (action-p ,proc) [(bindings ,binding-alist)] [(anchor ,name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(iframe (@ (src-p ,proc) [(bindings ,binding-alist)] [(anchor ,name)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(img (@ (src-p ,proc) [(bindings ,binding-alist)] ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(link (@ (href-p ,proc) [(bindings ,binding-alist)] ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(object (@ (data-p ,proc) [(bindings ,binding-alist)] [(anchor ,name) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(script (@ (src-p ,proc) [(bindings ,binding-alist)] ...) ...)</code>
          <div class="blockquote"><blockquote class="blockquote"><p>
              These attributes produce links that invoke the given
              procedure <em class="parameter"><code>proc</code></em> when followed. The
              HTTP request object will be passed as the only parameter
              to the procedure, and will contain the bindings
              specified in <em class="parameter"><code>binding-alist</code></em>, if
              present.
            </p><p>
              In the case of <code class="function">@action-p</code>, the form
              field values and the specified bindings will be merged,
              with the latter taking precedence over the former.
            </p><p>
              The optional <em class="parameter"><code>anchor</code></em> attribute
              allowed by some of the elements is made part of the
              generated URL.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10643" />
          <a class="indexterm" id="N10648" />
          <a class="indexterm" id="N1064D" />
          <a class="indexterm" id="N10652" />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(a (@ (href-c ,c-url) [(bindings ,binding-alist)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(form (@ (action-c ,c-url) [(bindings ,binding-alist)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(iframe (@ (src-c ,c-url) [(bindings ,binding-alist)] ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(img (@ (src-c ,c-url) [(bindings ,binding-alist)] ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(link (@ (href-c ,c-url) [(bindings ,binding-alist)] ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(object (@ (data-c ,c-url) [(bindings ,binding-alist)] ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(script (@ (src-c ,c-url) [(bindings ,binding-alist)] ...) ...)</code>
          <div class="blockquote"><blockquote class="blockquote"><p>
              These attributes allow specifying URLs relative to the
              context in which the <span class="application">SISCweb</span> application is
              running. They are useful to reference plain HTML files
              or JSPs that co-exist in the same context. If any
              bindings are specified, they will
              be included in the request associated to the
              <em class="parameter"><code>c-url</code></em>.
            </p><p>
              The <em class="parameter"><code>anchor</code></em> attribute is not
              allowed, as it can be directly specified in the
              <em class="parameter"><code>c-url</code></em> parameter.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N106AD" />
          <a class="indexterm" id="N106B2" />
          <a class="indexterm" id="N106B7" />
          <a class="indexterm" id="N106BC" />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(a (@ (href-e ,url) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(form (@ (action-e ,url) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(iframe (@ (src-e ,url) ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(img (@ (src-e ,url) ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(link (@ (href-e ,url) ...))</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(object (@ (data-e ,url) ...) ...)</code>
          <br />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(script (@ (src-e ,url) ...) ...)</code>
          <div class="blockquote"><blockquote class="blockquote"><p>
              These attributes encode the given
              <em class="parameter"><code>url</code></em> as per the the Java
              <code class="function">HttpServletResponse.encodeURL()</code>
              method. This is useful to support cookie-less
              interaction, as it will encode the session ID in the
              <em class="parameter"><code>url</code></em> as needed.
            </p><p>
              The <em class="parameter"><code>anchor</code></em> attribute is not
              allowed, as it can be directly specified in the
              <span class="ERROR">&lt;attribute&gt;c-url&lt;/attribute&gt;</span>.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N1071A" />
          <span class="emphasis"><em>attribute: </em></span>
          <code class="literal">`(object (@ (type "graphviz") (layout ,layout) (format ,format) ...)
          (graph (@ (id ,id) ...))</code>
          <div class="blockquote"><blockquote class="blockquote"><p>
              If the attribute <em class="parameter"><code>type "graphviz"</code></em>
              is specified for the <code class="function">object</code>
              element, a Graphviz graph will be embedded in the
              document.
            </p><p>
              The <em class="parameter"><code>layout</code></em> and
              <em class="parameter"><code>format</code></em> attributes are analogous
              to the omonymous parameters to the
              <code class="function">send-graphviz/*</code> functions (see
              <a href="#send-graphviz" title="Graphviz Procedures">the section called “Graphviz Procedures”</a>.) However, the value of
              <em class="parameter"><code>format</code></em> determines how the content
              is included:
            </p><div class="itemizedlist"><ul type="disc"><li><em class="parameter"><code>gif, jpg, png</code></em>: The graph is
                embedded as an <code class="function">img</code> tag, and a
                corresponding image map is generated. Links associated
                to nodes, edges and records will be mapped
                appropriately. Just as for other document elements,
                the <code class="function">@href[-[p|c|e]]</code> and
                <code class="function">@bindings</code> attributes are
                available, and behave as described in <a href="#ehtml" title="Extended HTML markup">the section called “Extended HTML markup”</a>.
              </li><li><em class="parameter"><code>ps, svg, etc.</code></em>: The graph is
                embedded as an <code class="function">object</code> tag. The
                appropriate mime type is automatically set, and needs
                not be specified explicitely.
              </li></ul></div><p>
              In both cases, any attribute specified for the
              <code class="function">object</code> tag will be applied toward
              the generated <code class="function">object</code> or
              <code class="function">img</code> tag.
            </p></blockquote></div>
        </p></blockquote></div><div class="informalexample"><pre class="programlisting">
(send-html/suspend
 (lambda (k-url)
  `(html
    (head
     (title "Embedded Graphviz")
    (body
    (h3 "Embedded Graphviz")

    (object (@ (type "graphviz")
               (layout dot) (format png))
      (graph (@ (id "G"))
        (node (@ (id "c") (label "scissors") (href "http://www.google.com/search?q=scissors")))
        (node (@ (id "p") (label "paper") (href "http://www.google.com/search?q=paper")))
        (node (@ (id "s") (label "stone") (href "http://www.google.com/search?q=stone")))
        (edge (@ (from "c") (to "p") (label "cut") (href-p ,cut)))
        (edge (@ (from "p") (to "s") (label "wraps") (href-c "/")))
        (edge (@ (from "s") (to "c") (label "breaks") (href-e ,k-url))))))))))
        </pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="send-text" />Plain Text</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/text</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides functions to send plain text responses.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10795" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-text/suspend</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;text&gt;)</span></span>) =&gt; <span class="type">request</span></code>
        <br />
        <a class="indexterm" id="N107B2" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-text/forward</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">(lambda (k-url) &lt;text&gt;)</span></span>) =&gt; <span class="type">request</span></code>
        <br />
        <a class="indexterm" id="N107CF" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-text/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;text&gt;</span></span>) =&gt; <span class="type">does not return</span></code>
        <br />
        <a class="indexterm" id="N107EC" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-text/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">&lt;text&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            These functions are analogous to those in the HTML and
            XHTML modules.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="forward" />Forwarding Requests</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/forward</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      Since <span class="application">SISCweb</span> lives in a J2EE environment, it is sometimes
      convenient to generate content using traditional techniques such
      as JSPs and servlets rather than SXML.
    </p><p>
      The <code class="function">send-forward/*</code> procedures dispatch the
      request to the indicated context-relative URL. Bindings can be
      attached in the form of &lt;bindings&gt; objects or a-lists. The
      <code class="function">forward/store!</code> function can also be used to
      pass URLs mapped to closures in the style of the
      <code class="function">@[action|data|href|src]-p</code> tags. Coupled
      with the URL corresponding to the current-continuation being set
      in the <em class="parameter"><code>siscweb.kURL</code></em> request attribute,
      this enables one to use <span class="application">SISCweb</span> for control and JSP/Servlets
      for presentation without losing too many features.
    </p><p>
      See <a href="#bindings-java" title="Extracting Bindings from Java">the section called “Extracting Bindings from Java”</a> for details on how to access
      bindings from Java.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10848" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-forward/suspend</span> <span class="methodparam"><span class="parameter">context-url</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">request</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Forwards the current request and suspends. The
            <em class="parameter"><code>context-url</code></em> is relative to the
            context in which the <span class="application">SISCweb</span> application is running.
            The optional <em class="parameter"><code>bindings</code></em> parameter is
            either a &lt;bindings&gt; object or an a-list as
            specified in <a href="#bindings" title="Chapter 6. Request Bindings">Chapter 6, <i>Request Bindings</i></a>. The continuation
            URL will be set in the <em class="parameter"><code>siscweb.kURL</code></em>
            request attribute.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1087D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-forward/forward</span> <span class="methodparam"><span class="parameter">context-url</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">request</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This function behaves like
            <code class="function">send-forward/suspend</code>, except that it
            clears the continuation table first. This will prevent the
            client from using the back button and resume the program
            flow from earlier points.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N108A3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-forward/back</span> <span class="methodparam"><span class="parameter">context-url</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Forwards the current request to the provided
            <em class="parameter"><code>context-url</code></em> and stops.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N108C9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-forward/finish</span> <span class="methodparam"><span class="parameter">context-url</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Like <code class="function">send-forward/back</code>, this function
            forwards the current request to the provided
            <em class="parameter"><code>context-url</code></em> and stops, but clears
            the continuation table first.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N108F3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">forward/store!</span> <span class="methodparam"><span class="parameter">proc</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">k-url</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">forward/store!</span> <span class="methodparam"><span class="parameter">c-url</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">k-url</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            In the first form, stores a closure
            <em class="parameter"><code>proc</code></em> in the continuation table, and
            returns the url that will invoke it.  The
            <em class="parameter"><code>proc</code></em> procedure should accept a
            request object as its only argument.  If
            <em class="parameter"><code>bindings</code></em> are specified, either as
            an a-list or a &lt;bindings&gt; object,
            <div class="procedure"><ol type="1" /></div> will see them as bindings in
            its request.
          </p><p>
            In the second form <code class="function">forward/store!</code>
            stores a closure that forwards the request to the given
            context-relative <em class="parameter"><code>c-url</code></em>, including
            any specified bindings, if any.
          </p><p>
            This function is especially useful when passing bindings
            through the <code class="function">send-forward/*</code> functions,
            as it allows to embed links to closures in JSPs and the
            such, and can thus be used to implement the same style of
            page navigation afforded by the tags
            <code class="function">@*-c</code>+<code class="function">@bindings</code>
            and
            <code class="function">@*-c</code>+<code class="function">@bindings</code>
            in the extended (X)HTML described in <a href="#ehtml" title="Extended HTML markup">the section called “Extended HTML markup”</a> Notably missing is the equivalent of the
            plain <code class="function">@bindings</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10963" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">forward/store!</span> <span class="methodparam"><span class="parameter">proc</span></span> [<span class="methodparam"><span class="parameter">bindings</span></span>]) =&gt; <span class="type">k-url</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This procedure is similar to the first form of
            <code class="function">forward/store!</code>, except that when
            <code class="function">proc</code> is executed, it will run in the
            dynamic context in effect when
            <code class="function">forward/dynenv/store!</code> is invoked.
          </p><p>
            The main reason to use this procedure is that
            <code class="function">proc</code> will see the same SRFI-39
            parameter bindings established at the time
            <code class="function">forward/dynenv/store!</code> was called.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="image" />Images</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/image</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides procedures to send images from
      <code class="function">java.awt.image.RenderedImage</code> or files.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N109BA" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-image/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">java.awt.image.RenderedImage</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sends the given image to the browser in the specified
            <em class="parameter"><code>format</code></em>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N109E6" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-image/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">java.awt.image.RenderedImage</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This procedure behaves like
            <code class="function">send-image/back</code>, except that it
            clears the continuation table. This will prevent the user
            from using the back button to resume the program flow from
            earlier points.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10A12" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-image-file/back</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">filename</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sends the image contained in the specified
            <em class="parameter"><code>filename</code></em> to the browser in the
            specified <em class="parameter"><code>format</code></em>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10A42" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-image-file/finish</span> [<span class="methodparam"><span class="parameter">header-alist</span></span>] <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">filename</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This procedure behaves like
            <code class="function">send-image-file/back</code>, except that it
            clears the continuation table. This will prevent the user
            from using the back button to resume the program flow from
            earlier points.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graphviz" />GraphViz Graphs</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/graphviz</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb-sxml.jar
      </strong></span>
    </p><p>
      This module provides procedures to send graphs in various
      formats as generated by Graphviz (<a href="http://www.graphviz.org" target="_top">http://www.graphviz.org</a>). Most of the functions accept a
      markup representation of DOT, the GraphViz language, in the form
      of DotML (see <a href="#dotml" title="DotML">the section called “DotML”</a>.)
    </p><p>
      The GraphViz programs (dot, neato, etc.) should be installed
      somewhere in the system path. This is usually the case in
      UNIX. Alternatively, it is possible to set the absolute paths to
      the GraphViz programs by using the
      <code class="function">graphiz/put-layout-command!</code> function.
    </p><p>
      Graphs can be generated either using the
      <code class="function">send-graphviz/*</code> functions, or by embedding
      the <em class="parameter"><code>@type="graphviz"</code></em> attribute
      in the (X)HTML <code class="function">object</code> tag (see <a href="#ehtml" title="Extended HTML markup">the section called “Extended HTML markup”</a>.)
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="send-graphviz" />Graphviz Procedures</h3></div></div></div><p>
        Both <code class="function">send-graphviz/*</code> procedures accept
        the same three parameters:
      </p><div class="itemizedlist"><ul type="disc"><li><em class="parameter"><code>layout</code></em>: This is a string specifying
          which Graphviz layout engine to use. The current choices are
          dot, neato, twopi, circo, and fdp.
        </li><li><em class="parameter"><code>format</code></em>: This is a string specifying
          the output format. The most useful choices currently are
          gif, jpg, 'png, 'ps, and 'svg.
        </li><li><em class="parameter"><code>&lt;dotml&gt;</code></em>: This is an sxml
          representation of the DotML language. See <a href="#dotml" title="DotML">the section called “DotML”</a>.
        </li></ul></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10AC4" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-graphviz/back</span> <span class="methodparam"><span class="parameter">layout</span></span> <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">&lt;dotml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Sends the given <em class="parameter"><code>dotml</code></em> graph in
              the specified <em class="parameter"><code>format</code></em> to the
              browser after laying the graph out using the indicated
              <em class="parameter"><code>layout</code></em> engine.
            </p></blockquote></div>
        </p></blockquote></div><div class="informalexample"><pre class="programlisting">
          
(send-graphviz/back
  'dot 'png
  `(graph (@ (id "G"))
    (node (@ (id "c") (label "scissors")))
    (node (@ (id "p") (label "paper")))
    (node (@ (id "s") (label "stone")))
    (edge (@ (from "c") (to "p") (label "cut")))
    (edge (@ (from "p") (to "s") (label "wraps")))
    (edge (@ (from "s") (to "c") (label "breaks")))))
          
        </pre></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10AFC" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-graphviz/finish</span> <span class="methodparam"><span class="parameter">layout</span></span> <span class="methodparam"><span class="parameter">format</span></span> <span class="methodparam"><span class="parameter">&lt;dotml&gt;</span></span>) =&gt; <span class="type">does not return</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              This procedure behaves like
              <code class="function">send-graphviz/back</code>, except that it
              clears the continuation table. This will prevent the
              user from using the back button to resume the program
              flow from earlier points.
            </p></blockquote></div>
        </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10B28" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">graphviz/put-layout-command!</span> <span class="methodparam"><span class="parameter">layout</span><span class="parameter">command</span></span>) =&gt; <span class="type">undefined</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Associates a given <em class="parameter"><code>layout</code></em> to the
              specified <em class="parameter"><code>command</code></em>.  This function
              can be used to add Graphviz layout engines, or to
              specify absolute paths for existing engines. The latter
              is likely to be an issue in Windows.
            </p></blockquote></div>
        </p></blockquote></div><div class="informalexample"><pre class="programlisting">
          
(graphviz/put-layout-command "dot" "d:/bin/dot.exe")
          
        </pre></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N10B53" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">graphviz/get-layout-command</span> <span class="methodparam"><span class="parameter">layout</span></span>) =&gt; <span class="type">command/#f</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Retrieves the <em class="parameter"><code>command</code></em> associated
              to the given <em class="parameter"><code>layout</code></em>, or #f if no
              association is present.
            </p></blockquote></div>
        </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dotml" />DotML</h3></div></div></div><p>
        The <code class="function">send-graphviz/*</code> procedures accept a
        graph description expressed in DotML. DotML was created by
        Martin Loetzsch, and an exhaustive description rich with
        excellent examples is at <a href="http://www.martin-loetzsch.de/DOTML" target="_top">http://www.martin-loetzsch.de/DOTML</a>.
      </p><p>
        SISCweb does not use code from the DotML project, but it
        implements the same markup syntax in sxml form. There are a
        few differences between SISCweb's implementation and the
        original:
      </p><div class="itemizedlist"><ul type="disc"><li>
          The generated DOT code (which is then fed into GraphViz) is somewhat different.
        </li><li>
          The <code class="function">graph</code>,
          <code class="function">sub-graph</code>, <code class="function">cluster</code>
          and <code class="function">node</code> elements must always specify
          an <em class="parameter"><code>id</code></em> attribute.
        </li><li>
          The <em class="parameter"><code>id</code></em> attribute values at the moment
          are limited to strings of alphanumeric characters and
          underscore.
        </li><li>
          The enclosing <code class="function">record</code> elements must
          specify an <em class="parameter"><code>id</code></em> attribute, but nested
          <code class="function">record</code> and <code class="function">node</code>
          elements do not have to.
        </li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="errors" />HTTP errors</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/error</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      HTTP error responses can be generated using two functions, which
      differ in how the affect the continuation table. Neither
      function returns. The error codes should abide to the <a href="http://www.faqs.org/rfcs/rfc2616.html" target="_top">RFC2616</a>
      specifications.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10BD6" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-error/back</span> <span class="methodparam"><span class="parameter">code</span></span> <span class="methodparam"><span class="parameter">message</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sends the specified HTTP error <em class="parameter"><code>code</code></em>
            and <em class="parameter"><code>message</code></em>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10C00" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">send-error/finish</span> <span class="methodparam"><span class="parameter">code</span></span> <span class="methodparam"><span class="parameter">message</span></span>) =&gt; <span class="type">does not return</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Like <code class="function">send-error/back</code>, but clears the
            continuation table.
          </p></blockquote></div>
      </p></blockquote></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="state" />Chapter 4. Managing Program State</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#stateful">Introduction to Statefulness</a></span></dt><dd><dl><dt><span class="section"><a href="#state-traditional">State in Traditional Web Applications</a></span></dt><dt><span class="section"><a href="#state-continuation">Continuations and State</a></span></dt><dt><span class="section"><a href="#state-finer">Finer Statefulness</a></span></dt></dl></dd><dt><span class="section"><a href="#parameters">State with SRFI-39 Parameter Objects</a></span></dt><dt><span class="section"><a href="#webcells">State with Web Cells</a></span></dt><dt><span class="section"><a href="#session-parameters">State with the Session Object</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="stateful" />Introduction to Statefulness</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="state-traditional" />State in Traditional Web Applications</h3></div></div></div><p>
        Introductions to web programming often mention the
        statelessness of the HTTP protocol, to then describe how cookies
        and sessions solve the problem. This is not a complete solution
        however: being "sessionful" is not the same as being
        "stateful."
      </p><p>
        Cookies and sessions are mechanisms laid on top of the HTTP
        protocol respectively to: a) allow an application to recognize
        two requests coming from the same browser as such, and b) to
        store data common to such requests.
      </p><p>
        Neither cookies nor sessions completely address the issue of
        statelesness because, while programs have the means to
        associate two requests to a given user (as they contain the
        same cookie), they have no means by which to associate two
        requests as being part of the same navigation flow. It is in
        fact possible to manually place requests out of sync with
        program state, and often trigger incorrect
        behavior. Traditional web applications are thus less like a
        program with a GUI interface and more like an API open to the
        world. Forced browsing, or even using the back button, can
        cause an application to misbehave in ways that are not easily
        foreseeable as application complexity increases.
      </p><p>
        Aside from state, the Session object is common to all requests
        from the same browser, so simply using a web application from
        two windows can produce concurrency problems such as loss of
        consistency or race conditions. Moreover, since the session is
        a global scope for the application, in fact the only scope
        that traditionally persists from request to request,
        developers are unable to take advantage of the finer scoping
        mechanisms available in modern programming languages.
      </p><p>
        One last major issue with traditional web applications is that
        they are made of short-lived code snippets which, after
        parsing the request in the context of the session, generate a
        response and exit. Because their state is lost, it is
        impossible to use structured programming techniques in code
        spanning multiple requests. Even the simplest for-loop must be
        expressed in terms of a (global) session variable increment
        and a GOTO (HREF).
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="state-continuation" />Continuations and State</h3></div></div></div><p>
        Continuations afford a truly stateful approach. When a program
        generates a response, it suspends its execution instead of
        exiting. This suspended state is a continuation, and it
        includes stack and variables in scope.  When the execution is
        resumed by the subsequent request, stack and variables are as
        they were left -- no manual storage in the session is
        needed.
      </p><p>
        <span class="application">SISCweb</span>, like other similar frameworks, is able to determine
        which requests are associated with which continuations by
        branding each request and its corresponding continuation with
        a unique, cryptographically strong hash.
      </p><p>
        Branding reduces the issue of the back button because any
        request originating from a page in the browser history is
        associated with a unique continuation. Re-submitting the same
        request results in the same code being run, with the same
        local variables and stack it had at the time it was
        suspended. A program written in functional style (i.e. with no
        side effects) will be completely immune to the back button.
      </p><p>
        Saving the local state means that a for-loop can be written at
        the language level. (The <a href="http://cvs.sourceforge.net/viewcvs.py/siscweb/siscweb/examples/scm/examples/hello-world.scm?view=markup" target="_top">Polyglot
        Hello World</a> example included with <span class="application">SISCweb</span>
        demonstrates this feature.)  Saving the stack also means that
        an entire navigation flow can be represented as a subroutine
        returning a value, rather than as a sequence of code snippets
        connected by GOTOs (HREFs) finally depositing a value in the
        global scope.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="state-finer" />Finer Statefulness</h3></div></div></div><p>
        Most complex applications will require a finer amount of
        control over state. For instance, a shopping cart should
        reflect the most recent operations even if the user were to
        backtrack by a few pages and resume shopping from a point in
        the navigation history. SRFI-39 or plain session variables can
        be used in such cases.
      </p><p>
        In other cases state is more closely dependent to the specific
        page, such as in the case of sorting a table in the
        browser. The sorting order should behave consistently in the
        presence of backtracking, cloning, and concurrent requests.
      </p><p>
        A possible solution for these cases is state-passing style,
        where a structure is passed from continuation to continuation
        and updated non-destructively. This can be somewhat
        inconvenient though, so instead <span class="application">SISCweb</span> implements Web
        Cells, a dynamic scoping mechanism that follows the page flow
        and branches with backtracking and cloning.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="parameters" />State with SRFI-39 Parameter Objects</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>srfi-39</em></span>)
      </strong></span>
    </p><p>
      A complete treatment of parameters is available in <a href="http://srfi.schemers.org/srfi-39/" target="_top">SRFI-39</a>. This
      section is concerned with the use of the dynamic environment to
      maintain state shared by all requests for the same user in the
      same execution flow.
    </p><p>
      SRFI-39 parameters are essentially dynamically-scoped
      variables. They can be defined in the global or the module scope
      and then bound to the dynamic scope -- the scope of the
      execution flow -- in the application entry point through the
      <code class="function">parameterize</code> form.
    </p><p>
      When using <code class="function">send-*/[suspend|forward]</code>, the
      parameters, being part of the dynamic environment, are captured
      in the suspended state -- the suspension of the program
      execution is transparent to parameter bindings.
    </p><p>
      However procedures stored with
      <code class="function">@href-p</code>-style attributes or the
      <code class="function">forward/store!</code> procedure will run in the
      base dynamic environment, and thus will see fresh values of the
      parameters. In those cases on can use
      <code class="function">forward/dynenv/store!</code>, which instead
      preserves the dynamic environment.
    </p><p>
      The <a href="http://cvs.sourceforge.net/viewcvs.py/siscweb/siscweb/examples/scm/examples/counter-parameter.scm?view=markup" target="_top">Counter
      with SRFI-39 Parameters</a> example demonstrates this
      technique.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="webcells" />State with Web Cells</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/webcells</em></span>)
      </strong></span>
    </p><p>
      Web Cells are a way to track program state according to the
      navigation flow. They are described in full in the paper <a href="http://library.readscheme.org/servlets/cite.ss?pattern=McCarthySK-Scheme2006" target="_top">Interaction-Safe
      State for the Web</a>.
    </p><p>
      In essence, cells establish a dynamic scope over the navigation
      path of a user. Successive pages can overshadow values of
      bindings set in previous pages, but do not destroy them.
    </p><p>
      If a user backtracks the browser window, previous values are
      again visible. If the user clones the window and proceeds
      through two different navigation branches, each branch sees the
      values it overshadows.
    </p><p>
      The <a href="http://cvs.sourceforge.net/viewcvs.py/siscweb/siscweb/examples/scm/examples/counter-webcells.scm?view=markup" target="_top">Counter
      with Webcells</a> example demonstrates this technique.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10CB8" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">webcell/make</span> [<span class="methodparam"><span class="parameter">name</span></span>] <span class="methodparam"><span class="parameter">default-value</span></span>) =&gt; <span class="type">&lt;cell&gt;</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Creates a cell with the given
            <em class="parameter"><code>default-value</code></em> with the specified
            name. Please note that <code class="literal">webcell/make</code>
            is a macro, so <em class="parameter"><code>name</code></em> is an
            identifier, not a symbol.
          </p><p>
            If <em class="parameter"><code>name</code></em> is omitted, a random name
            is generated. Omitting a specific name is useful to avoid
            name collisions (since cells are dynamically, not
            lexically, scoped). However if it is expected that
            sessions be serialized across context or server restarts,
            it may be important to guarantee that cells defined in the
            toplevel or int the module scope carry the same name.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10CEC" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">webcell/make-parameter</span> [<span class="methodparam"><span class="parameter">name</span></span>] <span class="methodparam"><span class="parameter">default-value</span></span>) =&gt; <span class="type">cell-parameter-proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Creates a parameter procedure in the sense of SRFI-39. As
            in the case of <code class="function">webcell/make</code>, the
            <em class="parameter"><code>name</code></em> parameter is optional, but
            recommended if maintaining the same name across context or
            server restarts is important.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10D16" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">webcell/set!</span> <span class="methodparam"><span class="parameter">cell</span></span> <span class="methodparam"><span class="parameter">value</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the content of the given <em class="parameter"><code>cell</code></em>
            to the specified <em class="parameter"><code>value</code></em>.
          </p><p>
            Of course the specified value is only accessible to the
            current and successive request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10D42" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">webcell/ref</span> <span class="methodparam"><span class="parameter">cell</span></span>) =&gt; <span class="type">value</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the specified <em class="parameter"><code>cell</code></em>
            in the context of the current request.
          </p><p>
            If the current request did not set a value already, the
            value will be looked up from the previous request (leading
            to the current), and then the previous again.
          </p><p>
            If no value can be found through the history of requests,
            then the cell's default value is returned.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="session-parameters" />State with the Session Object</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/session</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      In some situations a global, per-user scope may be
      desirable. This approach is more prone to concurrency
      problems, but its semantics is very straightforward.
    </p><p>
      The Session object can be accessed via a syntax similar to that
      of <a href="http://srfi.schemers.org/srfi-39/" target="_top">SRFI-39</a>
      parameters, or via Scheme wrappers around the
      <code class="function">Session.get/setAttribute()</code> calls. While the
      former is appropriate for storing Scheme values, the latter is
      provided as a means to store and retrieve Java objects (or
      <code class="function">java-wrap</code>ped Scheme values.)
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10D8F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/make-parameter</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked, sets or retrieves a Scheme value to/from the a
            Session attribute named <em class="parameter"><code>name</code></em>,
            depending on whether a value is passed or not to
            <div class="procedure"><ol type="1" /></div>.  If <code class="function">proc</code>
            is passed the #f value, the attribute is removed from the
            Session object altogether.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(module security
  (define auth-token (session/make-parameter "auth-key"))

  ;; sets an auth token in the session object
  (define (login usr pwd)
    (auth-token (make-token usr pwd))))
          
        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10DBE" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-java-attribute</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">jobject</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-java-attribute-names</span>) =&gt; <span class="type">list</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/set-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">jobject</span></span>) =&gt; <span class="type">#!void</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/set-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">jobject</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            These functions access Java attributes as session
            objects. Complete descriptions are given in <a href="#session" title="Session Procedures">the section called “Session Procedures”</a>.
          </p></blockquote></div>
      </p></blockquote></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="publishing" />Chapter 5. Publishing Procedures</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#html">Publishing Procedures</a></span></dt></dl></div><p>
    Procedures can be published to virtual paths of an application
    server within the hierarchy of a siscweb application. Publishing
    can be done both interactively at the server-side REPL during
    development, and in the web.xml file at deployment time. (See
    <a href="#adapter-servlet" title="The Adapter Servlet">the section called “The Adapter Servlet”</a>.)
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="html" />Publishing Procedures</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/publish</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides simple procedures to publish procedures to
      URL patterns. Patterns can be expressed either as wildcards or
      regular expressions.
    </p><p>
      Published procedures accept a single parameter in the form of
      a request object.
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        Since the Java HttpServletRequest object is not serializable,
        it is a good practice to clear any reference to it as soon as
        possible.
      </p></div><p>
      Wildcard patterns can use wildcards and double-wildcards between slashes,
      such as in "/hello/*" or "/hello/**/world". The first pattern
      matches requests such as "/hello/there", "/hello/", or even
      "/hello"; the second pattern matches "/hello/world" as well as
      "hello/what/a/wonderful/world/".
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10E4A" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish/wildcard</span> <span class="methodparam"><span class="parameter">url-wildcard-pattern</span></span> <span class="methodparam"><span class="parameter">(lambda (request) ...)</span></span>) =&gt; <span class="type">undefined</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish/wildcard</span> <span class="methodparam"><span class="parameter">url-wildcard-pattern</span></span> <span class="methodparam"><span class="parameter">symbol</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Publishes the given procedure <em class="parameter"><code>proc</code></em>
            or <em class="parameter"><code>symbol</code></em> at
            <em class="parameter"><code>url-wildcard-pattern</code></em>. The
            <em class="parameter"><code>symbol</code></em> will be looked up at run
            time every time. This is especially useful during
            development, since it allows one to redefine the procedure
            associated to <em class="parameter"><code>symbol</code></em> without having
            to republish.
          </p><p>
            When a request is received, the path-info section of the
            request URL is matched against each published pattern. If
            a match is found, the corresponding procedure is
            invoked. The procedure will receive the HTTP request as
            its only argument.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(publish/wildcard
  "/hello-world/*"
  (lambda (request)
    (set! request #f)
    (send-html/back
    `(html
      (head (title "Hello, world!"))
      (body (p "Hello, world!"))))))

        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10E9E" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish/regexp</span> <span class="methodparam"><span class="parameter">url-regexp-pattern</span></span> <span class="methodparam"><span class="parameter">(lambda (request) ...)</span></span>) =&gt; <span class="type">undefined</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish/regexp</span> <span class="methodparam"><span class="parameter">url-regexp-pattern</span></span> <span class="methodparam"><span class="parameter">symbol</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This function is equivalent to
            <code class="function">publish/wildcard</code>, save for the fact
            that it accepts a regular expression as a pattern.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10EDC" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish</span> <span class="methodparam"><span class="parameter">url-wildcard-pattern</span></span> <span class="methodparam"><span class="parameter">(lambda (request) ...)</span></span>) =&gt; <span class="type">undefined</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish</span> <span class="methodparam"><span class="parameter">url-wildcard-pattern</span></span> <span class="methodparam"><span class="parameter">symbol</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            This function is equivalent to
            <code class="function">publish/wildcard</code>, and is present both
            for backwards compatibility and to offer a convenient
            shorthand.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10F1A" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">unpublish</span> <span class="methodparam"><span class="parameter">url-pattern</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Removes a previously published procedure at the given
            pattern. The <em class="parameter"><code>url-pattern</code></em> passed to
            <code class="function">unpublish</code> must be identical to the
            one used to publish.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10F3E" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">get-published</span> <span class="methodparam"><span class="parameter">url-pattern</span></span>) =&gt; <span class="type">procedure/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the procedure published at the given
            <em class="parameter"><code>url-pattern</code></em> or #f if none is
            found.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10F5E" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">get-all-published</span>) =&gt; <span class="type">alist</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns an association list made of
            (<em class="parameter"><code>pattern</code></em>
            <em class="parameter"><code>procedure</code></em>
            <em class="parameter"><code>notation</code></em>) elements or '() if no
            procedures are published.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10F80" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">publish-bulk</span> <span class="methodparam"><span class="parameter">((url-pattern [procedure|symbol] notation) ...)</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Given an association list of (<em class="parameter"><code>url-pattern</code></em>
            <em class="parameter"><code>procedure</code></em>
            <em class="parameter"><code>notation</code></em>), publishes all the
            given procedures or symbols to the provided patterns.
          </p><p>
            Depending on whether <em class="parameter"><code>notation</code></em> is
            the symbol <code class="literal">'wildcard</code> or
            <code class="literal">'regexp</code>, the given
            <em class="parameter"><code>url-pattern</code></em> should be either a
            wildcard or regular expression pattern.
          </p></blockquote></div>
      </p></blockquote></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="bindings" />Chapter 6. Request Bindings</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#extracting-bindings">Extracting Bindings</a></span></dt><dt><span class="section"><a href="#bindings-java">Extracting Bindings from Java</a></span></dt><dt><span class="section"><a href="#security-bindings">Bindings and Security</a></span></dt></dl></div><p>
    Bindings associated with the request returned by the
    <code class="function">send-*/(suspend|forward)</code> functions, or passed
    as parameters to procedures that are either published or the
    target of a dispatch, can be extracted and associated to
    language-level variables.
  </p><p>
    Bindings, as returned by the function
    <code class="function">get-bindings</code> are contained in an opaque
    object. This object can be converted to an association list via
    <code class="function">bindings-&gt;alist</code>, or queried in constant time
    using the <code class="function">extract-bindings</code> or
    <code class="function">extract-single-binding</code> functions. The object
    is guaranteed to be serializable, but code should not rely on its
    specific implementation.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="extracting-bindings" />Extracting Bindings</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/bindings</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module assists developers in obtaining values of parameters
      passed in a request.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N10FF1" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">get-bindings</span> [<span class="methodparam"><span class="parameter">char-set</span></span>] <span class="methodparam"><span class="parameter">request</span></span>) =&gt; <span class="type">bindings</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Given a request object, this procedure returns an opaque
            object representing the request parameters as key-value(s)
            pairs.
          </p><p>
            The optional <em class="parameter"><code>char-set</code></em> parameter can
            be used to override the character encoding of the request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11019" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">exists-binding?</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">bindings</span></span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a boolean indicating whether a parameter with the
            given <em class="parameter"><code>name</code></em> contained in the request
            object. <em class="parameter"><code>name</code></em> can be either a string
            or a symbol.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11043" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">extract-single-binding</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">bindings</span></span>) =&gt; <span class="type">string/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value associated to the given
            <em class="parameter"><code>name</code></em> or #f if
            <em class="parameter"><code>name</code></em> is not present in the request
            object. If more than one value is bound to
            <em class="parameter"><code>name</code></em>, only the first one is
            returned.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11071" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">extract-bindings</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">bindings</span></span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the values bound to the given
            <em class="parameter"><code>name</code></em> in a list. Even if only one
            value is bound to the request parameter
            <em class="parameter"><code>name</code></em>, a list will still be
            returned.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1109B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">bindings-&gt;alist</span> <span class="methodparam"><span class="parameter">bindings</span></span>) =&gt; <span class="type">((name . value) ...)</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns an association list corresponding to the
            bindings. The <em class="parameter"><code>name</code></em> returned is
            always a string to maintain its casing, while the
            <em class="parameter"><code>value</code></em> returned is an atom or a list
            if <em class="parameter"><code>name</code></em> is associated to multiple
            values.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N110C3" />
        <span class="emphasis"><em>syntax: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">let-bindings</span> <span class="methodparam"><span class="parameter">((variable name) ... ) bindings body ...)</span></span>) =&gt; <span class="type">value</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Behaves like (let ...), but
            <em class="parameter"><code>variable</code></em>s are set to the values
            corresponding to the <em class="parameter"><code>name</code></em>s in the
            <em class="parameter"><code>bindings</code></em> object. The
            <em class="parameter"><code>value</code></em> returned is that of the last
            expression in the <em class="parameter"><code>body</code></em>.  A typical
            usage scenario could be:
          </p></blockquote></div>

        <div class="informalexample"><pre class="programlisting">
            
(let-bindings ((name "name"))
     (get-bindings
       (send-html/suspend
         (lambda (k-url)
           `(html
              (body
                (form (@ (action ,k-url))
                  (input (@ (type "text") (name "name")))))))))
  (send-html/back
    `(html
       (body
         (p "You typed: " ,name)))))
            
          </pre></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="bindings-java" />Extracting Bindings from Java</h2></div></div></div><p>
      Bindings specified in the <code class="function">send-forward/*</code>
      functions are assigned to request attributes. This method
      supercedes the previous <code class="literal">request.getBinding*()</code>
      API, which is now deprecated and will be removed in the
      next release.
    </p><p>
      Multi-valued bindings, as in <code class="literal">'((messages "hello"
      "there"))</code>, are turned into a
      <code class="literal">java.util.List</code> and can be easily scanned
      using such tools as JSTL's
      <code class="literal">&lt;c:forEach&gt;</code>. Single-valued bindings,
      such as <code class="literal">'((message . "hello"))</code> are simply
      assigned to the attribute.
    </p><p>
      Multi-valued bindings originating from a Scheme list are also
      marked as such, so that they can be converted back to a list of
      values rather than to an object of type
      <code class="literal">java.util.List</code>.
    </p><p>
      A minimal amount of type conversion is performed. Scheme values
      are passed as <span class="application">SISC</span> objects, except for Scheme strings, which
      are converted to Java strings. Java objects are left
      untouched. This also applies to the individual values of
      multi-valued bindings.
    </p><p>
      For instance, below is the Polyglot Hello World example using
      JSP/JSTL as the presentation layer. This example is not included
      in the distribution because of its external dependencies on the
      JSTL libraries.
    </p><div class="informalexample"><pre class="programlisting">
        
;; file: hello.scm
(require-library 'siscweb/forward)

(module examples/hello-world
  (hello-world)

  (import siscweb/forward)

  (define messages '("Hello, world!" "Salve, mundo!" "Hallo, Welt!" "Salve, mondo!" "Bonjour, monde!" "Hola, mundo!"))

  (define (hello-world req)
    (let loop ()
      (for-each
       (lambda (message)
         (send-forward/suspend "/jsp/hello.jsp" `((message . ,message))))
       messages)
      (loop)))
  )


&lt;%-- File: jsp/hello.jsp
--%&gt;&lt;%@ page contentType="text/html" %&gt;&lt;%--
--%&gt;&lt;%@ page isELIgnored="false" %&gt;&lt;%-- just for servlet v2.3 containers
--%&gt;&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;&lt;%--
--%&gt;&lt;%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml"%&gt;&lt;%--
--%&gt;&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%&gt;&lt;%--
--%&gt;&lt;%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql"%&gt;&lt;%--
--%&gt;&lt;%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%&gt;&lt;%--
--%&gt;&lt;?xml version="1.0"?&gt;

&lt;!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;c:out value="${requestScope.message}"/&gt;&lt;/title&gt;

    &lt;c:url var="cssUrl" value="/css/default.css"/&gt;
    &lt;link href="${cssUrl}"
          rel="stylesheet"
          type="text/css"/&gt;
  &lt;/head&gt;

  &lt;body&gt;
      &lt;h3&gt;Polyglot hello world&lt;/h3&gt;
      &lt;p&gt;${requestScope.message}&lt;/p&gt;

    &lt;p&gt;&lt;a href="${requestScope["siscweb.kURL"]}"&gt;Next language &amp;gt;&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;a href="${requestScope["siscweb.kURL"]}" target="_blank"&gt;Next language in new window&lt;/a&gt;&lt;/p&gt;
    &lt;c:url var="homeUrl" value="/"/&gt;
    &lt;p&gt;&lt;a href="${homeUrl}"&gt;^ Home&lt;/a&gt;&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
        
      </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="security-bindings" />Bindings and Security</h2></div></div></div><p>
      At the lower level, bindings are looked up in the request scope
      first (i.e. from request attributes) and then from request
      parameters. This behavior allows a more natural integration with
      standard J2EE components such as JSPs, but can be unsafe during
      forwards.
    </p><p>
      Specifically, if the application performs a server-side forward
      to Scheme code that relies on the absence of a binding to
      determine a course of action, a malicious user can inject a
      parameter by the same name into the request (provided they can
      guess the name), and upset the application's behavior. The best
      options in this case are:
    </p><div class="orderedlist"><ol type="1"><li><p>
          When forwarding from Scheme, pass bindings to the
          <code class="function">forward/*</code> and
          <code class="function">send-forward/*</code> functions even if they
          are #f or the empty list. SISCweb will add the name to a
          per-request blacklist, and will not look up the binding
          among the request parameters.
        </p></li><li><p>
          When forwarding from Java to Scheme, set the attributes to
          <code class="literal">null</code>. Again, the name will be
          blacklisted.
        </p></li><li><p>
          If the Java code that forwards to the Scheme code cannot be
          trusted or modified for some reason, the Scheme side can
          always use the <code class="literal">java/get-request-attribute</code>
          function described in <a href="#request" title="Request Procedures">the section called “Request Procedures”</a>.
        </p></li></ol></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="sql" />Chapter 7. Interaction with SQL Databases</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#jdbc">JDBC Functions</a></span></dt><dt><span class="section"><a href="#queries">Running Queries</a></span></dt><dt><span class="section"><a href="#vendors">Database Vendor Support </a></span></dt><dd><dl><dt><span class="section"><a href="#hsqldb">HSQLDB</a></span></dt><dt><span class="section"><a href="#postgresql">Microsoft SQL Server Support</a></span></dt><dt><span class="section"><a href="#oracle">Oracle</a></span></dt><dt><span class="section"><a href="#postgresql">PostgreSQL</a></span></dt><dt><span class="section"><a href="#otherdb">Adding Support for Other Vendors</a></span></dt></dl></dd></dl></div><p>
    The SQL library performs automatic conversion between scheme and
    database types. Since the exact conversion table depends on the
    vendor, a mechanism is provided to add support for other vendors
    though vendor-specific modules.
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
    This library is not yet complete, but it covers the most
    frequently used functionalities. It should be considered useful
    but immature; in particular, a few names and function signatures
    are subject to change.
  </div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="jdbc" />JDBC Functions</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>sql/jdbc</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb-sql.jar
      </strong></span>
    </p><p>
      This module provides functions to load drivers, obtain
      connections, and execute procedures within a transactional
      context.
    </p><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11174" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/load-driver</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Loads the JDBC driver specified by
            <em class="parameter"><code>name</code></em>. It is not necessary to use
            this function when obtaining a connection from a JDBC
            DataSource, or when using a plug-in, vendor-specific
            module. Returns a boolean representing the success of the
            operation.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(jdbc/load-driver "org.hsqldb.jdbcDriver")
          
        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11198" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/get-connection</span> <span class="methodparam"><span class="parameter">datasource</span></span>) =&gt; <span class="type">connection</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Obtains a connection from the specified JDBC
            <em class="parameter"><code>datasource</code></em>.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(import util/jndi)
(jdbc/get-connection (jndi/lookup "java:/comp/env/jdbc/myDS"))
          
        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N111BC" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/open-connection</span> <span class="methodparam"><span class="parameter">url</span></span> <span class="methodparam"><span class="parameter">username</span></span> <span class="methodparam"><span class="parameter">password</span></span>) =&gt; <span class="type">connection</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Opens and returns a connection to the database specified
            by the <em class="parameter"><code>url</code></em> parameter, logging in
            with the given <em class="parameter"><code>username</code></em> and
            <em class="parameter"><code>password</code></em>. The
            <em class="parameter"><code>url</code></em> is in the same
            <em class="parameter"><code>jdbc:subprotocol:subname</code></em> format as
            in the Java JDBC API.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(jdbc/open-connection "jdbc:hsqldb:file:/tmp/my-db" "sa" "")
            
        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N111FC" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/close-connection</span> <span class="methodparam"><span class="parameter">connection</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Closes the specified <em class="parameter"><code>connection</code></em>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1121C" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/get-vendor</span> <span class="methodparam"><span class="parameter">connection</span></span>) =&gt; <span class="type">vendor-name</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the vendor name, in lowercase, of the database to
            which <em class="parameter"><code>connection</code></em> points.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1123C" />
        <a class="indexterm" id="N11241" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/call-with-connection</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">proc</span></span>) =&gt; <span class="type">value</span></code>
        
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/call/conn</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">procedure</span></span>) =&gt; <span class="type">value</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Invokes <em class="parameter"><code>procedure</code></em> with the given
            <em class="parameter"><code>connection</code></em>. When the procedure
            terminates or fails, the connection is automatically
            <code class="function">close()</code>ed.  The passed
            <em class="parameter"><code>procedure</code></em> must accept a
            <em class="parameter"><code>connection</code></em> as its only
            argument. The value returned will be that returned by
            <em class="parameter"><code>procedure</code></em>.
          </p></blockquote></div>

        <div class="informalexample"><pre class="programlisting">
            
(jdbc/call/conn
  (jdbc/get-connection (jndi/lookup "java:/comp/env/jdbc/myDS"))
  (lambda (conn)
    (sql/execute conn "SELECT SYSDATE FROM DUAL")))
            
          </pre></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11296" />
        <a class="indexterm" id="N1129B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/call-with-transaction</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">proc</span></span>) =&gt; <span class="type">value</span></code>
        <br />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">jdbc/call/tran</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">procedure</span></span>) =&gt; <span class="type">value</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Invokes <em class="parameter"><code>procedure</code></em> within a
            transactional context. The transaction is committed if
            <em class="parameter"><code>procedure</code></em> returns normally, and
            rolled back in case of failure or invocation of an escape
            continuation. The passed <em class="parameter"><code>procedure</code></em>
            must accept <em class="parameter"><code>connection</code></em> as its only
            argument. The value returned will be that returned by
            <em class="parameter"><code>procedure</code></em>.
          </p></blockquote></div>

        <div class="informalexample"><pre class="programlisting">
            
(jdbc/call/conn
  (jdbc/get-connection (jndi/lookup "java:/comp/env/jdbc/myDS"))
  (lambda (conn)
    (jdbc/call/tran
      conn
      (lambda (conn)
        (sql/execute-update conn "UPDATE my_table SET my_field = 0")))))
            
          </pre></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="queries" />Running Queries</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>sql/query</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb-sql.jar
      </strong></span>
    </p><p>
      This module provides functions to execute queries and map
      through result sets.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
      JDBC ResultSets are translated to lazy lists (in the sense of
      <a href="http://srfi.schemers.org/srfi-45/" target="_top">srfi-45</a>)
      of SISC hashtables. When the last element of the list is fetched
      (or in case of error during fetching), the underlying JDBC
      ResultSet and Statement are automatically closed. In case of
      premature escape from the <code class="function">jdbc/call/conn</code>
      context, intentional or not, the JDBC ResultSet and Statement
      are closed only upon garbage collection. This can be a
      particularly insidious problem when using pooled connections,
      and will be fixed in the future.
    </div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11313" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">sql/execute</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">sql-query</span></span> <span class="methodparam"><span class="parameter">[value] ...</span></span>) =&gt; <span class="type">number/resultset</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Executes <em class="parameter"><code>sql-query</code></em> through the
            given <em class="parameter"><code>connection</code></em>.
          </p><p>
            A number of optional <em class="parameter"><code>value</code></em>s can be
            specified; these will be bound in order to the
            placeholders in the query. Date, time and timestamps from
            <a href="http://srfi.schemers.org/srfi-19/srfi-19.html" target="_top">srfi-19</a>
            can be used to bind to SQL DATE, TIME and TIMESTAMP types.
          </p><p>
            Returns the number of rows updated in case of an
            INSERT/UPDATE/DELETE query statement, and a result set in
            case of a SELECT statement. Result sets are lazy lists in
            the sense of <a href="http://srfi.schemers.org/srfi-45/srfi-45.html" target="_top">srfi-45</a>. Each
            element of the list is a hashtable <em class="parameter"><code>(field-name
            =&gt; value)</code></em>.  Multiple result sets are not
            supported.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(sql/execute conn "SELECT * FROM my_table WHERE id = ?" 12345)
            
        </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1135B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">sql/execute-query</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">sql-query</span></span> <span class="methodparam"><span class="parameter">[value] ...</span></span>) =&gt; <span class="type">resultset</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Runs <em class="parameter"><code>sql-query</code></em> and returns a result
            set.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11387" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">sql/execute-update</span> <span class="methodparam"><span class="parameter">connection</span></span> <span class="methodparam"><span class="parameter">sql-query</span></span> <span class="methodparam"><span class="parameter">[value] ...</span></span>) =&gt; <span class="type">number</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Runs <em class="parameter"><code>sql-query</code></em> and returns the
            number of updated rows.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N113B3" />
        <a class="indexterm" id="N113B8" />
        <span class="emphasis"><em>syntax: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">sql/map-row</span> <span class="methodparam"><span class="parameter">procedure</span></span> <span class="methodparam"><span class="parameter">((variable field-name) ...)</span></span> <span class="methodparam"><span class="parameter">body</span></span>) =&gt; <span class="type">list</span></code>
        <br />
        <span class="emphasis"><em>syntax: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">sql/for-each-row</span> <span class="methodparam"><span class="parameter">procedure</span></span> <span class="methodparam"><span class="parameter">((variable field-name) ...)</span></span> <span class="methodparam"><span class="parameter">body</span></span>) =&gt; <span class="type">undefined</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            These two macros facilitate writing code that loops
            through a resultset. Like their correspectives
            <code class="function">map</code> and
            <code class="function">for-each</code>, the former collects results
            into a list, while the latter is to be used for
            side-effects.
          </p><p>
            For each row in the <em class="parameter"><code>resultset</code></em>, a
            Scheme <em class="parameter"><code>variable</code></em> is bound to the
            value of the indicated <em class="parameter"><code>field-name</code></em>
            in the resultset, where <em class="parameter"><code>field-name</code></em>
            is either a string or a symbol.
          </p><p>
            In the case of <code class="function">sql/map-row</code>, the value
            returned by the last expression in
            <em class="parameter"><code>body</code></em> is collected into the returned
            <em class="parameter"><code>list</code></em>.
          </p></blockquote></div>
      </p><div class="informalexample"><pre class="programlisting">
          
(sql/for-each-row (sql/execute-query conn "SELECT id, name FROM person")
    ((id 'id)
     (name 'name))
  (display (format "~a:~a\n" id name)))
          
        </pre></div></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="vendors" />Database Vendor Support </h2></div></div></div><p>
      <span class="application">SISCweb</span> includes a number of vendor-specific modules that map
      Scheme data types onto SQL types and provide extra
      functionalities, usually in the area of BLOB handling.
    </p><p>
      Adding support for new vendors is described in <a href="#otherdb" title="Adding Support for Other Vendors">the section called “Adding Support for Other Vendors”</a>
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="hsqldb" />HSQLDB</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>sql/hsqldb</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sql.jar
        </strong></span>
      </p><p>
        Importing this module registers type conversions between
        HSQLDB and Scheme. Currently only numbers, strings, time types
        and Java objects are supported.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="postgresql" />Microsoft SQL Server Support</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>sql/mssql</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sql.jar
        </strong></span>
      </p><p>
        Importing this module registers type conversions between
        Microsoft SQL Server and Scheme. At this time bits, numbers,
        strings, and time types are supported.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="oracle" />Oracle</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>sql/oracle</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sql.jar
        </strong></span>
      </p><p>
        Importing this module registers type conversions between
        Oracle and Scheme. At this time numbers, strings (but not
        CLOBs), and time types are supported.  BLOBs are returned as
        such, but two functions are provided to use them as containers
        of Java objects.
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N1148A" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">oracle/read-blob</span> <span class="methodparam"><span class="parameter">blob</span></span>) =&gt; <span class="type">|java.lang.Object|</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Deserializes a Java object from
              <em class="parameter"><code>blob</code></em>.
            </p></blockquote></div>
        </p><div class="informalexample"><pre class="programlisting">
            
;; returns an alist (id =&gt; object)
(sql/map-row (sql/execute-query "SELECT id, obj FROM my_table")
    ((id 'id)
     (blob 'obj))
  `(,id . ,(oracle/read-blob blob)))
            
          </pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
          <a class="indexterm" id="N114AE" />
          <span class="emphasis"><em>procedure: </em></span>
          <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">oracle/write-blob</span> <span class="methodparam"><span class="parameter">blob</span></span> <span class="methodparam"><span class="parameter">java-object</span></span>) =&gt; <span class="type">undefined</span></code>

          <div class="blockquote"><blockquote class="blockquote"><p>
              Serializes <em class="parameter"><code>java-object</code></em> into
              <em class="parameter"><code>blob</code></em>. Complex Scheme values can
              also be serialized by <code class="function">java-wrap</code>ping
              them. The blob has to be first inserted using the Oracle
              EMPTY_BLOB() function, and then read back with a SELECT
              query.
            </p></blockquote></div>
        </p><div class="informalexample"><pre class="programlisting">
            
(sql/for-each-row (sql/execute-query "SELECT id, obj FROM my_table WHERE id = ?" 12345)
    ((blob 'obj))
  (oracle/write-blob blob (java-wrap (lambda (x) (* x x)))))
            
          </pre></div></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="postgresql" />PostgreSQL</h3></div></div></div><p>
        <span class="emphasis"><em>Requires:</em></span>
        <span class="bold"><strong>
          (import <span class="emphasis"><em>sql/postgresql</em></span>)
        </strong></span>
        <br />
        <span class="emphasis"><em>Located in:</em></span>
        <span class="bold"><strong>
          siscweb-sql.jar
        </strong></span>
      </p><p>
        Importing this module registers type conversions between
        PostgreSQL and Scheme. At this time bits, numbers, strings,
        time types and vectors are supported.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="otherdb" />Adding Support for Other Vendors</h3></div></div></div><p>
        It is possible to add support for other database vendors. The
        existing modules (such as sql/hsqldb.scm) can be used as base
        and reference.
      </p><p>
        At this stage, supporting a new vendor is simply a matter of
        defining an association list between SQL types and conversion
        procedures. Each conversion procedure accepts the object as
        read by the Java <code class="function">Statement.getObject(n)</code>
        method, a ResultSetMetaData object, and the column number.
      </p><p>
        The function should return a Scheme type. If that is not
        possible (such as it is the case with BLOBs), the function can
        return a raw Java type, as long as the module provides other
        functions to transform the Java type into a Scheme type.
      </p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="lowlev" />Chapter 8. Lower-level APIs</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#request">Request Procedures</a></span></dt><dt><span class="section"><a href="#response">Response Procedures</a></span></dt><dt><span class="section"><a href="#session">Session Procedures</a></span></dt><dt><span class="section"><a href="#context">ServletContext Procedures</a></span></dt></dl></div><p>
    Even though <span class="application">SISCweb</span> applies an abstraction layer over
    characteristics of the HTTP protocol, it is still at times
    convenient to access the details of requests, responses,
    sessions and the servlet context in which they live.
  </p><p>
    For this reason <span class="application">SISCweb</span> provides wrappers around all the methods
    of the <code class="function">Request</code>,
    <code class="function">Response</code>, <code class="function">Session</code> and
    <code class="function">ServletContext</code>objects. All the procedures
    operate on the instances current at the time of invocation.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="request" />Request Procedures</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/request</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides wrappers around the Request object current
      at the time of invocation.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Because of the large number of methods, they are here sorted
        in alphabetical order. The descriptions are adapted from the
        J2EE 1.3 javadoc.
      </p></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11547" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">current-request</span>) =&gt; <span class="type">javax.servlet.http.HttpServletRequest</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the current Request object. Since complete
            wrappers are provided by this module, this is normally
            useful to either create Request adapters, or to use the
            the procedure returned by
            <code class="function">request/get-dispatcher</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11561" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-auth-type</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of the authentication scheme used to
            protect the URL of the published procedure, or #f if the
            URL does not require authentication.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11577" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-character-encoding</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of the character encoding used in the
            body of this request, or #f if the request does not
            specify a character encoding.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1158D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-content-length</span>) =&gt; <span class="type">number</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the length, in bytes, of the request body and made
            available by the input stream, or -1 if the length is not
            known.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N115A3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-content-type</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the MIME type of the body of the request, or #f
            if the type is not known.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N115B9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-cookies</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list containing all of the
            <code class="function">javax.servlet.http.Cookie</code> objects the client sent with
            this request. This method returns the empty list if no
            cookies were sent.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N115D3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-date-header</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">time</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the specified request header as a
            SRFI-19 time structure. Use this method with headers that
            contain dates, such as If-Modified-Since.
          </p><p>
            If the request did not have a header of the specified
            name, this method returns #f. If the header can't be
            converted to a date, the method throws a Java
            <code class="function">IllegalArgumentException</code>.  </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N115F5" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-dispatcher</span> <span class="methodparam"><span class="parameter">c-url</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked with the parameters <em class="parameter"><code>request</code></em>
            and <em class="parameter"><code>response</code></em>, will forward the
            request to the resource located at the given
            <em class="parameter"><code>c-url</code></em>. The resource can be dynamic
            or static.
          </p><p>
            The specified <em class="parameter"><code>c-url</code></em> may be relative
            to the path of the published procedure, although it cannot
            extend outside the current servlet context. If the path
            begins with a "/" it is interpreted as relative to the
            current context root. This method returns #f if the
            servlet container cannot return a RequestDispatcher.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11627" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-header</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the specified request header as a
            string. If the request did not include a header of the
            specified <em class="parameter"><code>name</code></em>, this procedure
            returns #f. The header <em class="parameter"><code>name</code></em> is
            case insensitive. You can use this procedure with any
            request header.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1164B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-header-alist</span>) =&gt; <span class="type">alist</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a <em class="parameter"><code>(name . value)</code></em>
            association list of all the header names. All the header
            <em class="parameter"><code>value</code></em>s are returned as strings.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11669" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-header-hashtable</span>) =&gt; <span class="type">hashtable</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns all the request headers as a hashtable of
            <em class="parameter"><code>name</code></em>-<em class="parameter"><code>value</code></em>
            associations. All the header <em class="parameter"><code>value</code></em>s
            are returned as strings.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1168B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-header-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns list of all the header names this request
            contains. If the request has no headers, this method
            returns an empty list.
          </p><p>
            Some servlet containers do not allow do not allow servlets
            to access headers using this method, in which case this
            procedure returns #f.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N116A3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-header-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns list of all the header names this request
            contains. If the request has no headers, this method
            returns an empty list.
          </p><p>
            Some servlet containers do not allow do not allow servlets
            to access headers using this method, in which case this
            procedure returns #f.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N116BB" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-int-header</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">integer</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the specified request header as an
            integer. If the request does not have a header of the
            specified name, this procedure returns #f. If the header
            cannot be converted to an integer, this method throws a
            Java <code class="function">NumberFormatException</code>.
          </p><p>
            The header name is case insensitive.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N116DD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-java-attribute</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">jobject</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the <em class="parameter"><code>name</code></em>d
            attribute as a Java object, or <code class="function">null</code>
            if no attribute of the given <em class="parameter"><code>name</code></em>
            exists.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11705" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-java-attribute-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list of names of the attributes available to
            this request. This method returns an empty list if the
            request has no attributes available to it.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1171B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-locale</span>) =&gt; <span class="type">java.util.Locale</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a Java <code class="function">java.util.Locale</code>
            object representing the preferred locale that the client
            will accept content in, based on the Accept-Language
            header. If the client request doesn't provide an
            Accept-Language header, this method returns the default
            locale for the server.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11735" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-locales</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list of <code class="function">java.util.Locale</code>
            objects indicating, in decreasing order starting with the
            preferred locale, the locales that are acceptable to the
            client based on the Accept-Language header. If the client
            request doesn't provide an Accept-Language header, this
            method returns an Enumeration containing one
            <code class="function">java.util.Locale</code>, the default locale
            for the server.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11753" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-method</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of the HTTP method with which this
            request was made, for example, GET, POST, or PUT.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11769" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-parameter</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of a request parameter as a string, or
            #f if the parameter does not exist.
          </p><p>
            You should only use this method when you are sure the
            parameter has only one value. If the parameter might have
            more than one value, use
            <code class="function">request/get-parameter-values</code>.  If you
            use this method with a multivalued parameter, the value
            returned is equal to the first value in the list returned
            by <code class="function">request/get-parameter-values</code>.
          </p><p>
            If the parameter data was sent in the request body, such
            as occurs with an HTTP POST request, then reading the body
            directly via
            <code class="function">request/open-binary-input-port</code> or
            <code class="function">request/open-input-port</code> can interfere
            with the execution of this procedure.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11799" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-parameter-alist</span>) =&gt; <span class="type">alist</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a <em class="parameter"><code>(name . (value1 ...))</code></em>
            association list of all parameters and their values.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N117B3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-parameter-hashtable</span>) =&gt; <span class="type">hashtable</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a hashtable containing the association between
            parameter names and lists of the parameter values.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N117C9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-parameter-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list of names of the parameters contained in
            this request. If the request has no parameters, the
            procedure returns an empty list.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N117DF" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-parameter-values</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list of values of the given request parameter,
            or the empty list if the parameter does not exist.
          </p><p>
            If the parameter has a single value, the list has a length
            of 1.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N117FD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-path-info</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns any extra path information associated with the URL
            the client sent when it made this request. The extra path
            information follows the path of the
            <code class="function">SISCAdapterServlet</code> but precedes the
            query string. This procedure returns #f if there was no
            extra path information.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11817" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-path-translated</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns any extra path information after the servlet name
            but before the query string, and translates it to a real
            path.
          </p><p>
            If the URL does not have any extra path information, this
            method returns #f. The web container does not decode
            thins string.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1182F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-protocol</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name and version of the protocol the request
            uses in the form protocol/majorVersion.minorVersion, for
            example, HTTP/1.1.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11845" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-query-string</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the query string that is contained in the request
            URL after the path. This procedure returns #f if the URL
            does not have a query string.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1185B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-remote-addr</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the Internet Protocol (IP) address of the client
            that sent the request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11871" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-remote-host</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the fully qualified name of the client that sent
            the request. If the engine cannot or chooses not to
            resolve the hostname (to improve performance), this
            procedure returns the dotted-string form of the IP
            address.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11887" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-remote-user</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the login of the user making this request, if the
            user has been authenticated, or #f if the user has not
            been authenticated. Whether the user name is sent with
            each subsequent request depends on the browser and type of
            authentication.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1189D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-requested-session-id</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the session ID specified by the client. This may
            not be the same as the ID of the actual session in
            use. For example, if the request specified an old
            (expired) session ID and the server has started a new
            session, this method gets a new session with a new ID. If
            the request did not specify a session ID, this method
            returns #f.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N118B3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-scheme</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of the scheme used to make this request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N118C9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-server-name</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the host name of the server that received the
            request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N118DF" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-server-port</span>) =&gt; <span class="type">integer</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the port number on which this request was
            received.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N118F5" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-servlet-path</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the part of this request's URL that calls the
            <code class="function">SISCAdapterServlet</code>. This includes
            either the servlet name or a path to the servlet, but does
            not include any extra path information or a query string.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1190F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-session</span> [<span class="methodparam"><span class="parameter">create?</span></span>]) =&gt; <span class="type">javax.servlet.http.HttpSession</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the current HttpSession associated with this
            request or, if if there is no current session and the
            <em class="parameter"><code>create?</code></em> is #t or absent, returns a
            new session.
          </p><p>
            If <em class="parameter"><code>create</code></em> is #f and the request
            has no valid <code class="function">HttpSession</code>, this method
            returns <code class="function">null</code>.
          </p><p>
            To make sure the session is properly maintained, you must
            call this method before the response is committed. If the
            container is using cookies to maintain session integrity
            and is asked to create a new session when the response is
            committed, a Java
            <code class="function">IllegalStateException</code> is thrown.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11943" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-uri</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the part of this request's URL from the protocol
            name up to the query string in the first line of the HTTP
            request. The web container does not decode this String.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11959" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-url</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Reconstructs the URL the client used to make the
            request. The returned URL contains a protocol, server
            name, port number, and server path, but it does not
            include query string parameters.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1196F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-user-principal</span>) =&gt; <span class="type">java.security.Principal</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a <code class="function">java.security.Principal</code>
            object containing the name of the current authenticated
            user. If the user has not been authenticated, the method
            returns <code class="function">null</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1198D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/open-binary-input-port</span>) =&gt; <span class="type">binary-input-port</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Retrieves the body of the request as binary data using a
            binary input port. Either this procedure or
            <code class="function">request/open-input-port</code> may be called
            to read the body, not both.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N119A7" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/open-input-port</span>) =&gt; <span class="type">character-input-port</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Retrieves the body of the request as character data using
            a character input port. The port translates the character
            data according to the character encoding used on the
            body. Either this procedure or
            <code class="function">request/open-binary-input-port</code> may be
            called to read the body, not both.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N119C1" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/remove-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Removes an attribute from this request. This method is not
            generally needed as attributes only persist as long as the
            request is being handled.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N119DD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/session-id-from-cookie?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether the requested session ID came in as a
            cookie.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N119F3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/session-id-from-url?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether the requested session ID came in as part of
            the request URL.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11A09" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/requested-session-id-valid?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether the requested session ID is still valid.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11A1F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/secure?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether this request was made using a secure
            channel, such as HTTPS.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11A35" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/set-character-encoding!</span> <span class="methodparam"><span class="parameter">encoding</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Overrides the name of the character encoding used in the
            body of this request. This method must be called prior to
            reading request parameters or reading input using
            <code class="function">request/open-input-port</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11A55" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/set-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">jobject</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Stores a Java object in the <em class="parameter"><code>name</code></em>d
            attribute in this request. Attributes are reset between
            requests. This method is most often used in conjunction
            with <code class="function">request/make-dispatcher</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11A7F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/user-in-role?</span> <span class="methodparam"><span class="parameter">username</span></span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether the authenticated user is included in the
            specified logical "role". Roles and role
            membership can be defined using deployment descriptors. If
            the user has not been authenticated, the method returns
            #f.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="response" />Response Procedures</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/response</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides wrappers around the Response object current
      at the time of invocation.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Because of the large number of methods, they are here sorted
        in alphabetical order. The descriptions are adapted from the
        J2EE 1.3 javadoc.
      </p></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11AB9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">current-response</span>) =&gt; <span class="type">javax.servlet.http.HttpServletResponse</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the current Response object. Since complete
            wrappers are provided by this module, this is normally
            useful to either create Request adapters, or to use the
            the procedure returned by
            <code class="function">request/get-dispatcher</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11AD3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/add-cookie!</span> <span class="methodparam"><span class="parameter">javax.servlet.http.Cookie</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Adds the specified cookie to the response. This method can
            be called multiple times to set more than one cookie.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11AEF" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/add-header!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">value</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Adds a response header with the given name and value. This
            method allows response headers to have multiple values.
          </p><p>
            The <em class="parameter"><code>value</code></em> parameter can either be a
            string, an integer number or an SRFI-19 date or time
            structure.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11B17" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/add-headers!</span> <span class="methodparam"><span class="parameter">alist</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Adds multiple headers, one for each
            (<em class="parameter"><code>name</code></em>
            . <em class="parameter"><code>value</code></em>) element of the
            <em class="parameter"><code>alist</code></em>, with
            <em class="parameter"><code>value</code></em> being either a string, an
            integer number or an SRFI-19 time structure.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11B43" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/commit!</span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Commits the response, forcing any content in the buffer to
            be written to the client, including the status code and
            headers.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11B59" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/committed?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks if the response has been committed. A commited
            response has already had its status code and headers
            written.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11B6F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/contains-header?</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Checks whether the <em class="parameter"><code>name</code></em>d response
            header has already been set.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11B8F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/encode-redirect-url</span> <span class="methodparam"><span class="parameter">url</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Encodes the specified <em class="parameter"><code>url</code></em> for use
            in the <code class="function">response/send-redirect</code>
            procedure or, if encoding is not needed, returns the
            <em class="parameter"><code>url</code></em> unchanged. The implementation
            of this method includes the logic to determine whether the
            session ID needs to be encoded in the URL. Because the
            rules for making this determination can differ from those
            used to decide whether to encode a normal link, this
            procedure is separate from
            <code class="function">response/encode-url</code>.
          </p><p>
            All URLs sent to the
            <code class="function">response/send-redirect</code> procedure
            should be run through this method. Otherwise, URL
            rewriting cannot be used with browsers which do not
            support cookies.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11BC1" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/encode-url</span> <span class="methodparam"><span class="parameter">url</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Encodes the specified <em class="parameter"><code>url</code></em> by
            including the session ID in it, or, if encoding is not
            needed, returns the <em class="parameter"><code>url</code></em>
            unchanged. The implementation of this method includes the
            logic to determine whether the session ID needs to be
            encoded in the URL. For example, if the browser supports
            cookies, or if session tracking is turned off, URL
            encoding is unnecessary.
          </p><p>
            For robust session tracking, all URLs emitted by a servlet
            should be run through this method. Otherwise, URL
            rewriting cannot be used with browsers which do not
            support cookies.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11BE7" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/get-buffer-size</span>) =&gt; <span class="type">integer</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the actual buffer size used for the response. If
            no buffering is used, this procedure returns 0.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11BFD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/get-character-encoding</span>) =&gt; <span class="type">encoding</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of the charset used for the MIME body
            sent in this response. If no charset has been assigned, it
            is implicitly set to ISO-8859-1 (Latin-1).
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C13" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/get-locale</span>) =&gt; <span class="type">java.util.Locale</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the locale assigned to the response.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C29" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/open-binary-output-port</span>) =&gt; <span class="type">binary-output-port</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a binary output port suitable for writing binary
            data in the response. The servlet container does not
            encode the binary data.
          </p><p>
            Flushing the port commits the response. Either this method
            or <code class="function">response/open-output-port</code> may be
            called to write the body, not both.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C45" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/open-output-port</span>) =&gt; <span class="type">character-output-port</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a character output port that can send character
            text to the client. The character encoding used is the one
            specified in the charset= property of the
            <code class="function">response/set-content-type!</code> procedure,
            which must be called before calling this procedure for the
            charset to take effect.
          </p><p>
            If necessary, the MIME type of the response is modified to
            reflect the character encoding used.
          </p><p>
            Flushing the port commits the response. Either this method
            or <code class="function">response/open-binary-output-port</code>
            may be called to write the body, not both.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C67" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/reset!</span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Clears any data that exists in the buffer as well as the
            status code and headers. If the response has been
            committed, this method throws a Java
            <code class="function">IllegalStateException</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C81" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/reset-buffer!</span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Clears the content of the underlying buffer in the
            response without clearing headers or status code. If the
            response has been committed, this method throws a Java
            <code class="function">IllegalStateException</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11C9B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/send-error</span> <span class="methodparam"><span class="parameter">status-code</span></span> [<span class="methodparam"><span class="parameter">message</span></span>]) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sends an error response to the client using the specified
            status clearing the buffer. The server defaults to
            creating the response to look like an HTML-formatted
            server error page containing the specified message,
            setting the content type to "text/html", leaving cookies
            and other headers unmodified. If an error-page declaration
            has been made for the web application corresponding to the
            status code passed in, it will be served back in
            preference to the suggested msg parameter.
          </p><p>
            If the response has already been committed, this method
            throws a Java
            <code class="function">IllegalStateException</code>. After using
            this method, the response should be considered to be
            committed and should not be written to.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11CC3" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/send-redirect</span> <span class="methodparam"><span class="parameter">url</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sends a temporary redirect response to the client using
            the specified redirect <em class="parameter"><code>url</code></em>. This
            method can accept relative URLs; the servlet container
            must convert the relative URL to an absolute URL before
            sending the response to the client. If the location is
            relative without a leading '/' the container interprets it
            as relative to the current request URI. If the location is
            relative with a leading '/' the container interprets it as
            relative to the servlet container root.
          </p><p>
            If the response has already been committed, this method
            throws a Java
            <code class="function">IllegalStateException</code>. After using
            this method, the response should be considered to be
            committed and should not be written to.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11CE9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/set-buffer-size!</span> <span class="methodparam"><span class="parameter">bufsize</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the preferred buffer size for the body of the
            response. The servlet container will use a buffer at least
            as large as the size requested. The actual buffer size
            used can be found using
            <code class="function">response/get-buffer-size</code>.
          </p><p>
            This method must be called before any response body
            content is written; if content has been written, this
            method throws a Java
            <code class="function">IllegalStateException</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11D0F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/set-content-length!</span> <span class="methodparam"><span class="parameter">length</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the length of the content body in the response In
            HTTP servlets, this method sets the HTTP Content-Length
            header.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11D2B" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/set-content-type!</span> <span class="methodparam"><span class="parameter">type</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the content type of the response being sent to the
            client. The content type may include the type of character
            encoding used, for example, text/html; charset=ISO-8859-4.
          </p><p>
            If obtaining a character output port, this method should
            be called first.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11D49" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/set-header!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">value</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets a response header with the given
            <em class="parameter"><code>name</code></em> and
            <em class="parameter"><code>value</code></em>. If the header had already
            been set, the new value overwrites the previous one. The
            <code class="function">response/contains-header?</code> procedure
            can be used to test for the presence of a header before
            setting its value.
          </p><p>
            The <em class="parameter"><code>value</code></em> parameter can either be a
            string, an integer number or an SRFI-19 date or time
            structure.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11D7D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/set-locale!</span> <span class="methodparam"><span class="parameter">java.util.Locale</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the locale of the response, setting the headers
            (including the Content-Type's charset) as
            appropriate. This method should be called before a call to
            <code class="function">reponse/open-output-port</code>. By default,
            the response locale is the default locale for the server.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11D9D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">response/set-status!</span> <span class="methodparam"><span class="parameter">status-code</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Sets the status code for this response. This method is
            used to set the return status code when there is no error
            (for example, for the status codes SC_OK or
            SC_MOVED_TEMPORARILY). If there is an error, and the
            caller wishes to invoke an defined in the web applicaion,
            the <code class="function">response/send-error</code> procedure
            should be used instead.
          </p><p>
            The container clears the buffer and sets the Location
            header, preserving cookies and other headers.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="session" />Session Procedures</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/session</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides wrappers around the Response object current
      at the time of invocation.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The procedures are sorted in alphabetical order. The
        descriptions are adapted from the J2EE 1.3 javadoc.
      </p></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11DDD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">current-session</span>) =&gt; <span class="type">javax.servlet.HttpSession</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the current Session, or creates a new one if one
            is not defined yet. Also see the procedure
            <code class="function">request/get-session</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11DF7" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-creation-time</span>) =&gt; <span class="type">time</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the time when this session was created as an
            SRFI-19 time structure.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E0D" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-id</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a string containing the unique identifier assigned
            to this session. The identifier is assigned by the servlet
            container and is implementation dependent.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E23" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-java-attribute</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">jobject</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the Java object bound with the specified name in
            this session, or <code class="function">null</code> if no object is
            bound under the name.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E43" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-java-attribute-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns an list of names of all the objects bound to this
            session.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E59" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-last-accessed-time</span>) =&gt; <span class="type">time</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the last time the client sent a request associated
            with this session, as an SRFI-19 time structure, and
            marked by the time the container received the request.
          </p><p>
            Actions that your application takes, such as getting or
            setting a value associated with the session, do not affect
            the access time.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E71" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-max-inactive-interval</span>) =&gt; <span class="type">seconds</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the maximum time interval, in seconds, that the
            servlet container will keep this session open between
            client accesses. After this interval, the servlet
            container will invalidate the session. The maximum time
            interval can be set with the setMaxInactiveInterval
            method. A negative time indicates the session should never
            timeout.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11E87" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/get-servlet-context</span>) =&gt; <span class="type">javax.servlet.ServletContext</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the
            <code class="function">javax.servlet.ServletContext</code> object
            to which this session belongs.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11EA1" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/invalidate!</span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Invalidates this session then unbinds any objects bound to
            it.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11EB7" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/make-parameter</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked, sets or retrieves a Scheme value to/from the a
            Session attribute named <em class="parameter"><code>name</code></em>,
            depending on whether a value is passed or not to
            <div class="procedure"><ol type="1" /></div>.  If <code class="function">proc</code>
            is passed the #f value, the attribute is removed from the
            Session object altogether.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11EE2" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/new?</span>) =&gt; <span class="type">#t/#f</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns #t if the client does not yet know about the
            session or if the client chooses not to join the
            session. For example, if the server used only cookie-based
            sessions, and the client had disabled the use of cookies,
            then a session would be new on each request.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11EF8" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/remove-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Removes the object bound with the specified
            <em class="parameter"><code>name</code></em> from this session. If the
            session does not have an object bound with the specified
            name, this method does nothing.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11F18" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/set-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">jobject</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Binds a Java object <em class="parameter"><code>jobject</code></em> to this
            session, using the specified
            <em class="parameter"><code>name</code></em>. If an object of the same name
            is already bound to the session, that object is replaced.
          </p><p>
          If the value passed in is <code class="function">jnull</code>, this
          has the same effect as calling
          <code class="function">session/remove-java-attribute!</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11F4C" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">session/set-max-inactive-interval!</span> <span class="methodparam"><span class="parameter">seconds</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Specifies the time, in <em class="parameter"><code>seconds</code></em>,
            between client requests before the servlet container will
            invalidate this session. A negative time indicates the
            session should never timeout.
          </p></blockquote></div>
      </p></blockquote></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="context" />ServletContext Procedures</h2></div></div></div><p>
      <span class="emphasis"><em>Requires:</em></span>
      <span class="bold"><strong>
        (import <span class="emphasis"><em>siscweb/context</em></span>)
      </strong></span>
      <br />
      <span class="emphasis"><em>Located in:</em></span>
      <span class="bold"><strong>
        siscweb.jar
      </strong></span>
    </p><p>
      This module provides wrappers around the ServletContext object.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The procedures are sorted in alphabetical order. The
        descriptions are adapted from the J2EE 1.3 javadoc.
      </p></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11F8A" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">current-context</span>) =&gt; <span class="type">javax.servlet.ServletContext</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the current ServletContext. Also see the procedure
            <code class="function">context/get</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11FA4" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get</span> <span class="methodparam"><span class="parameter">uripath</span></span>) =&gt; <span class="type">javax.servlet.ServletContext</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a ServletContext object that corresponds to a
            specified URL on the server.
          </p><p>
            This method allows servlets to gain access to the context
            for various parts of the server, and as needed obtain
            RequestDispatcher objects from the context. The given path
            must be begin with "/", is interpreted relative to the
            server's document root and is matched against the context
            roots of other web applications hosted on this container.
          </p><p>
            In a security conscious environment, the servlet container
            may return <div class="procedure"><ol type="1" /></div> for a given URL.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N11FC7" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-dispatcher</span> <span class="methodparam"><span class="parameter">c-url</span></span>) =&gt; <span class="type">proc</span></code>
        <br />
        <a class="indexterm" id="N11FDE" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-named-dispatcher</span> <span class="methodparam"><span class="parameter">servlet-name</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked with the parameters <em class="parameter"><code>request</code></em>
            and <em class="parameter"><code>response</code></em>, will forward the
            request to the resource located at the given
            <em class="parameter"><code>c-url</code></em>. The resource can be dynamic
            or static.
          </p><p>
            In the first form, the specified
            <em class="parameter"><code>c-url</code></em> may be relative to the path
            of the published procedure, although it cannot extend
            outside the current servlet context. If the path begins
            with a "/" it is interpreted as relative to the current
            context root. This method returns #f if the servlet
            container cannot return a RequestDispatcher.
          </p><p>
            In the second form, the specified
            <em class="parameter"><code>servlet-name</code></em> indicates a Servlet or
            JSP page named either via server administration or via a
            web application deployment descriptor.
          </p><p>
            This method returns #f if the ServletContext cannot
            return a dispatcher for any reason.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12018" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-init-parameter</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the value of the <em class="parameter"><code>named</code></em>d
            context-wide initialization parameter as a string, or #f
            if the parameter does not exist.
          </p><p>
            This method can make available configuration information
            useful to an entire "web application". For
            example, it can provide a webmaster's email address or the
            name of a system that holds critical data.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1203A" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-init-parameter-alist</span>) =&gt; <span class="type">alist</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a <em class="parameter"><code>(name . value)</code></em>
            association list of all the context's initialization
            parameter names and their values.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12054" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-init-parameter-hashtable</span>) =&gt; <span class="type">hashtable</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a hashtable containing the association between all
            the context's initialization parameter names and their
            values.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1206A" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">request/get-init-parameter-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list of names of the context' s initialization
            parameters. If the has no initialization parameters, the
            procedure returns an empty list.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12080" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-java-attribute</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">jobject</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the servlet container attribute with the given
            name, or null if there is no attribute by that name. An
            attribute allows a servlet container to give the servlet
            additional information not already provided by this
            interface. See your server documentation for information
            about its attributes. A list of supported attributes can
            be retrieved using
            <code class="function">context/get-java-attribute-names</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N120A0" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-java-attribute-names</span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a list containing the attribute names available
            within this servlet context. Use the
            <code class="function">context/get-java-attribute</code> procedure
            with an attribute name to get the value of an attribute.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N120BA" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-major-version</span>) =&gt; <span class="type">integer</span></code>
        <br />
        <a class="indexterm" id="N120CB" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-minor-version</span>) =&gt; <span class="type">integer</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            These procedures return the major and minor versions of
            the Java Servlet API that this servlet container
            supports. All implementations that comply with Version 2.3
            must have this methods respectively return the integers 2 and 3.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N120E1" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-mime-type</span> <span class="methodparam"><span class="parameter">file-path</span></span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the MIME type of the specified file, or #f if the
            MIME type is not known. The MIME type is determined by the
            configuration of the servlet container, and may be
            specified in a web application deployment
            descriptor. Common MIME types are "text/html" and
            "image/gif".
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N120FD" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-name</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name of this web application correponding to
            this servlet context as specified in the deployment
            descriptor for this web application by the
            <code class="function">display-name</code> element.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12117" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-real-path</span> <span class="methodparam"><span class="parameter">c-url</span></span>) =&gt; <span class="type">path</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a string containing the real path for a given
            virtual path. For example, the path
            "/index.html" returns the absolute file path on
            the server's filesystem would be served by a request for
            "http://host/contextPath/index.html", where
            contextPath is the context path of this servlet context.
          </p><p>
            The real path returned will be in a form appropriate to
            the computer and operating system on which the servlet
            container is running, including the proper path
            separators. This method returns null if the servlet
            container cannot translate the virtual path to a real path
            for any reason (such as when the content is being made
            available from a .war archive).
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12135" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-real-path</span> <span class="methodparam"><span class="parameter">c-url</span></span>) =&gt; <span class="type">path</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a string containing the real path for a given
            virtual path. For example, the path
            "/index.html" returns the absolute file path on
            the server's filesystem would be served by a request for
            "http://host/contextPath/index.html", where
            contextPath is the context path of this servlet context.
          </p><p>
            The real path returned will be in a form appropriate to
            the computer and operating system on which the servlet
            container is running, including the proper path
            separators. This method returns null if the servlet
            container cannot translate the virtual path to a real path
            for any reason (such as when the content is being made
            available from a .war archive).
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12153" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-resource</span> <span class="methodparam"><span class="parameter">file-path</span></span>) =&gt; <span class="type">url</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a string representing a URL to the resource that
            is mapped to a specified path. The path must begin with a
            "/" and is interpreted as relative to the
            current context root.
          </p><p>
            This procedure allows the servlet container to make a
            resource available to servlets from any source. Resources
            can be located on a local or remote file system, in a
            database, or in a .war file.
          </p><p>
            This procedure returns #f if no resource is mapped to the
            pathname.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12173" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-resource-paths</span> <span class="methodparam"><span class="parameter">file-path</span></span>) =&gt; <span class="type">list</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a directory-like list of all the paths to
            resources within the web application whose longest
            sub-path matches the supplied path argument. Paths
            indicating subdirectory paths end with a
            "/". The returned paths are all relative to the
            root of the web application and have a leading
            "/".
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N1218F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-resource-paths</span>) =&gt; <span class="type">string</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns the name and version of the servlet container on
            which the servlet is running.
          </p><p>
            The form of the returned string is
            servername/versionnumber. For example, the JavaServer Web
            Development Kit may return the string JavaServer Web Dev
            Kit/1.0.
          </p><p>
            The servlet container may return other optional
            information after the primary string in parentheses, for
            example, JavaServer Web Dev Kit/1.0 (JDK 1.1.6; Windows NT
            4.0 x86).
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N121A9" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/make-parameter</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked, sets or retrieves a Scheme value to/from the a
            servlet context attribute named
            <em class="parameter"><code>name</code></em>, depending on whether a value
            is passed or not to <div class="procedure"><ol type="1" /></div>.  If
            <code class="function">proc</code> is passed the #f value, the
            attribute is removed from the servlet context altogether.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N121D4" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/open-resource-binary-input-port</span> <span class="methodparam"><span class="parameter">file-path</span></span>) =&gt; <span class="type">binary-input-port</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a binary input port that reads from the resource
            located at the named <em class="parameter"><code>file-path</code></em> as
            an InputStream object.
          </p><p>
            The data in file can be of any type or length. The
            <em class="parameter"><code>file-path</code></em> must be specified
            according to the rules given in
            <code class="function">context/get-resource</code>. This procedure
            returns #f if no resource exists at the specified path.
          </p><p>
            Meta-information such as content length and content type
            that is available via
            <code class="function">context/get-resource</code> method is lost
            when using this method.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12204" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/remove-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Removes the attribute with the given name from the servlet
            context. After removal, subsequent calls to
            <code class="function">context/get-java-attribute</code> to
            retrieve the attribute's value will return #f.
          </p><p>
            If listeners are configured on the ServletContext the
            container notifies them accordingly.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12226" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/set-java-attribute!</span> <span class="methodparam"><span class="parameter">name</span></span> <span class="methodparam"><span class="parameter">jobject</span></span>) =&gt; <span class="type">#!void</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Binds an object to a given attribute
            <em class="parameter"><code>name</code></em> in this servlet context. If
            the name specified is already used for an attribute, this
            method will replace the attribute with the new to the new
            attribute.
          </p><p>
            If listeners are configured on the ServletContext the
            container notifies them accordingly.
          </p><p>
            If a <code class="function">jnull</code> value is passed, the
            effect is the same as calling
            <code class="function">context/remove-java-attribute!</code>.
          </p></blockquote></div>
      </p></blockquote></div><div class="blockquote"><blockquote class="blockquote"><p>
        <a class="indexterm" id="N12258" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-dispatcher</span> <span class="methodparam"><span class="parameter">c-url</span></span>) =&gt; <span class="type">proc</span></code>
        <br />
        <a class="indexterm" id="N1226F" />
        <span class="emphasis"><em>procedure: </em></span>
        <code xmlns="http://www.w3.org/TR/xhtml1/transitional" class="methodsynopsis">(<span class="methodname">context/get-named-dispatcher</span> <span class="methodparam"><span class="parameter">servlet-name</span></span>) =&gt; <span class="type">proc</span></code>

        <div class="blockquote"><blockquote class="blockquote"><p>
            Returns a procedure <code class="function">proc</code> that, when
            invoked with the parameters <em class="parameter"><code>request</code></em>
            and <em class="parameter"><code>response</code></em>, will forward the
            request to the resource located at the given
            <em class="parameter"><code>c-url</code></em>. The resource can be dynamic
            or static.
          </p><p>
            In the first form, the specified
            <em class="parameter"><code>c-url</code></em> may be relative to the path
            of the published procedure, although it cannot extend
            outside the current servlet context. If the path begins
            with a "/" it is interpreted as relative to the current
            context root. This method returns #f if the servlet
            container cannot return a RequestDispatcher.
          </p><p>
            In the second form, the specified
            <em class="parameter"><code>servlet-name</code></em> indicates a Servlet or
            JSP page named either via server administration or via a
            web application deployment descriptor.
          </p><p>
            This method returns #f if the ServletContext cannot
            return a dispatcher for any reason.
          </p></blockquote></div>
      </p></blockquote></div></div></div><div class="appendix" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="gpl" />GNU General Public License</h1></div><div><p class="releaseinfo">      Version 2, June 1991</p></div><div><p class="copyright">Copyright © 1989, 1991 Free Software Foundation, Inc.</p></div><div><div class="legalnotice"><a id="N122B6" /><p>	
	<div class="address"><p><span style="white-space: pre;">Free Software Foundation, Inc. 
	  <span class="street">59 Temple Place, Suite 330</span>, 
	  <span class="city">Boston</span>, 
	  <span class="state">MA</span> 
	  <span class="postcode">02111-1307</span>
	  <span class="country">USA</span>
	</span></p></div>.
      </p><p>	Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.
      </p></div></div><div><p class="pubdate">Version 2, June 1991</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#gpl-1">Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">How to Apply These Terms to Your New Programs
    </a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-1" />Preamble</h2></div></div></div><p>      The licenses for most software are designed to take away your 
      freedom to share and change it. By contrast, the GNU General Public License is 
      intended to guarantee your freedom to share and change 
      free software - to make sure the software is free for all its users. 
      This General Public License applies to most of the Free Software 
      Foundation's software and to any other program whose authors commit 
      to using it. (Some other Free Software Foundation software is covered 
      by the GNU Library General Public License instead.) You can apply it 
      to your programs, too.
    </p><p>      When we speak of free software, we are referring to freedom, not price. 
      Our General Public Licenses are designed to make sure that you have the 
      freedom to distribute copies of free software (and charge for this 
      service if you wish), that you receive source code or can get it if you 
      want it, that you can change the software or use pieces of it in new free 
      programs; and that you know you can do these things.
    </p><p>      To protect your rights, we need to make restrictions that forbid anyone 
      to deny you these rights or to ask you to surrender the rights. These 
      restrictions translate to certain responsibilities for you if you distribute 
      copies of the software, or if you modify it.
    </p><p>      For example, if you distribute copies of such a program, whether gratis or 
      for a fee, you must give the recipients all the rights that you have. You 
      must make sure that they, too, receive or can get the source code. And you 
      must show them these terms so they know their rights.
    </p><p>      We protect your rights with two steps:
      <div class="orderedlist"><ol type="1"><li><p>	    copyright the software, and
	  </p></li><li><p>	    offer you this license which gives you legal permission to copy, 
	    distribute and/or modify the software.
	  </p></li></ol></div>
    </p><p>      Also, for each author's protection and ours, we want to make certain that 
      everyone understands that there is no warranty for this free software. If 
      the software is modified by someone else and passed on, we want its 
      recipients to know that what they have is not the original, so that any 
      problems introduced by others will not reflect on the original authors' 
      reputations.
    </p><p>      Finally, any free program is threatened constantly by software patents. 
      We wish to avoid the danger that redistributors of a free program will 
      individually obtain patent licenses, in effect making the program 
      proprietary. To prevent this, we have made it clear that any patent must be 
      licensed for everyone's free use or not licensed at all.
    </p><p>      The precise terms and conditions for copying, distribution and modification 
      follow.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-2" />TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-0" />Section 0</h3></div></div></div><p>	This License applies to any program or other work which contains a notice 
	placed by the copyright holder saying it may be distributed under the terms 
	of this General Public License. The "Program", below, refers to any such 
	program or work, and a 
	“<span class="quote">work based on the Program
	</span>” means either 
	the Program or any derivative work under copyright law: that is to say, a 
	work containing the Program or a portion of it, either verbatim or with 
	modifications and/or translated into another language. (Hereinafter, translation 
	is included without limitation in the term 
	“<span class="quote">modification
	</span>”.) Each licensee is addressed as “<span class="quote">you</span>”.
      </p><p>	Activities other than copying, distribution and modification are not covered by 
	this License; they are outside its scope. The act of running the Program is not 
	restricted, and the output from the Program is covered only if its contents 
	constitute a work based on the Program (independent of having been made by running 
	the Program). Whether that is true depends on what the Program does.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-1" />Section 1</h3></div></div></div><p>	You may copy and distribute verbatim copies of the Program's source code as you 
	receive it, in any medium, provided that you conspicuously and appropriately 
	publish on each copy an appropriate copyright notice and disclaimer of warranty; 
	keep intact all the notices that refer to this License and to the absence of any 
	warranty; and give any other recipients of the Program a copy of this License 
	along with the Program.
      </p><p>	You may charge a fee for the physical act of transferring a copy, and you may at 
	your option offer warranty protection in exchange for a fee.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-2" />Section 2</h3></div></div></div><p>	You may modify your copy or copies of the Program or any portion of it, thus 
	forming a work based on the Program, and copy and distribute such modifications 
	or work under the terms of 
	<a href="#gpl-2-1" title="Section 1">Section 1
	</a> above, provided 
	that you also meet all of these conditions:
	<div class="orderedlist"><ol type="1"><li><p>	      You must cause the modified files to carry prominent notices stating that 
	      you changed the files and the date of any change.
	    </p></li><li><p>	      You must cause any work that you distribute or publish, that in whole or 
	      in part contains or is derived from the Program or any part thereof, to be 
	      licensed as a whole at no charge to all third parties under the terms of 
	      this License.
	    </p></li><li><p>	      If the modified program normally reads commands interactively when run, you 
	      must cause it, when started running for such interactive use in the most 
	      ordinary way, to print or display an announcement including an appropriate 
	      copyright notice and a notice that there is no warranty (or else, saying 
	      that you provide a warranty) and that users may redistribute the program 
	      under these conditions, and telling the user how to view a copy of this 
	      License. 
	      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Exception:
		</h3><p>		  If the Program itself is interactive but does not normally print such an 
		  announcement, your work based on the Program is not required to print an 
		  announcement.) 
		</p></div>
	    </p></li></ol></div>
      </p><p>	These requirements apply to the modified work as a whole. If identifiable sections 
	of that work are not derived from the Program, and can be reasonably considered 
	independent and separate works in themselves, then this License, and its terms, 
	do not apply to those sections when you distribute them as separate works. But when 
	you distribute the same sections as part of a whole which is a work based on the 
	Program, the distribution of the whole must be on the terms of this License, whose 
	permissions for other licensees extend to the entire whole, and thus to each and 
	every part regardless of who wrote it.
      </p><p>	Thus, it is not the intent of this section to claim rights or contest your rights 
	to work written entirely by you; rather, the intent is to exercise the right to control 
	the distribution of derivative or collective works based on the Program.
      </p><p>	In addition, mere aggregation of another work not based on the Program with the Program 
	(or with a work based on the Program) on a volume of a storage or distribution medium 
	does not bring the other work under the scope of this License.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-3" />Section 3
      </h3></div></div></div><p>	You may copy and distribute the Program (or a work based on it, under 
	<a href="#gpl-2-2" title="Section 2">Section 2
	</a> in object code or executable form under the terms of 
	<a href="#gpl-2-1" title="Section 1">Sections 1
	</a> and 
	<a href="#gpl-2-2" title="Section 2">2
	</a> above provided that you also do one of the following:
	<div class="orderedlist"><ol type="1"><li><p>	Accompany it with the complete corresponding machine-readable source code, which 
	      must be distributed under the terms of Sections 1 and 2 above on a medium 
	      customarily used for software interchange; or,
	    </p></li><li><p>	      Accompany it with a written offer, valid for at least three years, to give any 
	      third party, for a charge no more than your cost of physically performing source 
	      distribution, a complete machine-readable copy of the corresponding source code, 
	      to be distributed under the terms of Sections 1 and 2 above on a medium customarily 
	      used for software interchange; or,
	    </p></li><li><p>	      Accompany it with the information you received as to the offer to distribute 
	      corresponding source code. (This alternative is allowed only for noncommercial 
	      distribution and only if you received the program in object code or executable form 
	      with such an offer, in accord with Subsection b above.)
	    </p></li></ol></div>
      </p><p>	The source code for a work means the preferred form of the work for making modifications 
	to it. For an executable work, complete source code means all the source code for all modules 
	it contains, plus any associated interface definition files, plus the scripts used to control 
	compilation and installation of the executable. However, as a special exception, the source 
	code distributed need not include anything that is normally distributed (in either source or 
	binary form) with the major components (compiler, kernel, and so on) of the operating system 
	on which the executable runs, unless that component itself accompanies the executable.
      </p><p>	If distribution of executable or object code is made by offering access to copy from a 
	designated place, then offering equivalent access to copy the source code from the same place 
	counts as distribution of the source code, even though third parties are not compelled to 
	copy the source along with the object code.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-4" />Section 4
      </h3></div></div></div><p>	You may not copy, modify, sublicense, or distribute the Program except as expressly provided 
	under this License. Any attempt otherwise to copy, modify, sublicense or distribute the 
	Program is void, and will automatically terminate your rights under this License. However, 
	parties who have received copies, or rights, from you under this License will not have their 
	licenses terminated so long as such parties remain in full compliance.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-5" />Section 5
      </h3></div></div></div><p>	You are not required to accept this License, since you have not signed it. However, nothing 
	else grants you permission to modify or distribute the Program or its derivative works. 
	These actions are prohibited by law if you do not accept this License. Therefore, by modifying 
	or distributing the Program (or any work based on the Program), you indicate your acceptance 
	of this License to do so, and all its terms and conditions for copying, distributing or 
	modifying the Program or works based on it.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-6" />Section 6
      </h3></div></div></div><p>	Each time you redistribute the Program (or any work based on the Program), the recipient 
	automatically receives a license from the original licensor to copy, distribute or modify 
	the Program subject to these terms and conditions. You may not impose any further restrictions 
	on the recipients' exercise of the rights granted herein. You are not responsible for enforcing 
	compliance by third parties to this License.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-7" />Section 7
      </h3></div></div></div><p>	If, as a consequence of a court judgment or allegation of patent infringement or for any other 
	reason (not limited to patent issues), conditions are imposed on you (whether by court order, 
	agreement or otherwise) that contradict the conditions of this License, they do not excuse you 
	from the conditions of this License. If you cannot distribute so as to satisfy simultaneously 
	your obligations under this License and any other pertinent obligations, then as a consequence 
	you may not distribute the Program at all. For example, if a patent license would not permit 
	royalty-free redistribution of the Program by all those who receive copies directly or 
	indirectly through you, then the only way you could satisfy both it and this License would be 
	to refrain entirely from distribution of the Program.
      </p><p>	If any portion of this section is held invalid or unenforceable under any particular circumstance, 
	the balance of the section is intended to apply and the section as a whole is intended to apply 
	in other circumstances.
      </p><p>	It is not the purpose of this section to induce you to infringe any patents or other property 
	right claims or to contest validity of any such claims; this section has the sole purpose of 
	protecting the integrity of the free software distribution system, which is implemented by public 
	license practices. Many people have made generous contributions to the wide range of software 
	distributed through that system in reliance on consistent application of that system; it is up 
	to the author/donor to decide if he or she is willing to distribute software through any other 
	system and a licensee cannot impose that choice.
      </p><p>	This section is intended to make thoroughly clear what is believed to be a consequence of the 
	rest of this License.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-8" />Section 8
      </h3></div></div></div><p>	If the distribution and/or use of the Program is restricted in certain countries either by patents 
	or by copyrighted interfaces, the original copyright holder who places the Program under this License 
	may add an explicit geographical distribution limitation excluding those countries, so that 
	distribution is permitted only in or among countries not thus excluded. In such case, this License 
	incorporates the limitation as if written in the body of this License.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-9" />Section 9
      </h3></div></div></div><p>	The Free Software Foundation may publish revised and/or new versions of the General Public License 
	from time to time. Such new versions will be similar in spirit to the present version, but may differ 
	in detail to address new problems or concerns.
      </p><p>	Each version is given a distinguishing version number. If the Program specifies a version number of 
	this License which applies to it and "any later version", you have the option of following the terms 
	and conditions either of that version or of any later version published by the Free Software 
	Foundation. If the Program does not specify a version number of this License, you may choose any 
	version ever published by the Free Software Foundation.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-10" />Section 10
      </h3></div></div></div><p>	If you wish to incorporate parts of the Program into other free programs whose distribution 
	conditions are different, write to the author to ask for permission. For software which is copyrighted 
	by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions 
	for this. Our decision will be guided by the two goals of preserving the free status of all 
	derivatives of our free software and of promoting the sharing and reuse of software generally.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-11" />NO WARRANTY Section 11
      </h3></div></div></div><p>	BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT 
	PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR 
	OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, 
	INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR 
	PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE 
	PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
      </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-12" />Section 12
      </h3></div></div></div><p>	IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR 
	ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU 
	FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE 
	USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED 
	INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH 
	ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH 
	DAMAGES.
      </p><p>END OF TERMS AND CONDITIONS
      </p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-3" />How to Apply These Terms to Your New Programs
    </h2></div></div></div><p>
      If you develop a new program, and you want it to be of the greatest
      possible use to the public, the best way to achieve this is to make it
      free software which everyone can redistribute and change under these terms.
    </p><p>
      To do so, attach the following notices to the program.  It is safest
      to attach them to the start of each source file to most effectively
      convey the exclusion of warranty; and each file should have at least
      the "copyright" line and a pointer to where the full notice is found.
    </p><p>
      &lt;one line to give the program's name and a brief idea of what it does.&gt;
      Copyright (C) &lt;year&gt;    &lt;name of author&gt;
    </p><p>
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
    </p><p>
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
    </p><p>
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
    </p><p>
      Also add information on how to contact you by electronic and paper mail.
    </p><p>
      If the program is interactive, make it output a short notice like this
      when it starts in an interactive mode:
    </p><p>
      Gnomovision version 69, Copyright (C) year name of author
      Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
      This is free software, and you are welcome to redistribute it
      under certain conditions; type `show c' for details.
    </p><p>
      The hypothetical commands `show w' and `show c' should show the appropriate
      parts of the General Public License.  Of course, the commands you use may
      be called something other than `show w' and `show c'; they could even be
      mouse-clicks or menu items--whatever suits your program.
    </p><p>
      You should also get your employer (if you work as a programmer) or your
      school, if any, to sign a "copyright disclaimer" for the program, if
      necessary.  Here is a sample; alter the names:
    </p><p>
      Yoyodyne, Inc., hereby disclaims all copyright interest in the program
      `Gnomovision' (which makes passes at compilers) written by James Hacker.
    </p><p>
      &lt;signature of Ty Coon&gt;, 1 April 1989
      Ty Coon, President of Vice
    </p><p>
      This General Public License does not permit incorporating your program into
      proprietary programs.  If your program is a subroutine library, you may
      consider it more useful to permit linking proprietary applications with the
      library.  If this is what you want to do, use the GNU Library General
      Public License instead of this License.
    </p></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="index" />Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>@action-c, <a href="#ehtml">Extended HTML markup</a></dt><dt>@action-e, <a href="#ehtml">Extended HTML markup</a></dt><dt>@action-p, <a href="#ehtml">Extended HTML markup</a></dt><dt>@bindings, <a href="#ehtml">Extended HTML markup</a></dt><dt>@data-c, <a href="#ehtml">Extended HTML markup</a></dt><dt>@data-e, <a href="#ehtml">Extended HTML markup</a></dt><dt>@data-p, <a href="#ehtml">Extended HTML markup</a></dt><dt>@href-c, <a href="#ehtml">Extended HTML markup</a></dt><dt>@href-e, <a href="#ehtml">Extended HTML markup</a></dt><dt>@href-p, <a href="#ehtml">Extended HTML markup</a></dt><dt>@src-c, <a href="#ehtml">Extended HTML markup</a></dt><dt>@src-e, <a href="#ehtml">Extended HTML markup</a></dt><dt>@src-p, <a href="#ehtml">Extended HTML markup</a></dt><dt>@type "graphviz", <a href="#ehtml">Extended HTML markup</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>bindings-&gt;alist, <a href="#extracting-bindings">Extracting Bindings</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>context/get, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-dispatcher, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-init-parameter, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-init-parameter-alist, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-init-parameter-hashtable, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-java-attribute, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-java-attribute-names, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-major-version, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-mime-type, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-minor-version, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-name, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-named-dispatcher, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-real-path, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-resource, <a href="#context">ServletContext Procedures</a></dt><dt>context/get-resource-paths, <a href="#context">ServletContext Procedures</a></dt><dt>context/make-parameter, <a href="#context">ServletContext Procedures</a></dt><dt>context/open-resource-binary-input-port, <a href="#context">ServletContext Procedures</a></dt><dt>context/remove-java-attribute!, <a href="#context">ServletContext Procedures</a></dt><dt>context/set-java-attribute!, <a href="#context">ServletContext Procedures</a></dt><dt>current-context, <a href="#context">ServletContext Procedures</a></dt><dt>current-request, <a href="#request">Request Procedures</a></dt><dt>current-response, <a href="#response">Response Procedures</a></dt><dt>current-session, <a href="#session">Session Procedures</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>exists-binding?, <a href="#extracting-bindings">Extracting Bindings</a></dt><dt>extract-bindings, <a href="#extracting-bindings">Extracting Bindings</a></dt><dt>extract-single-binding, <a href="#extracting-bindings">Extracting Bindings</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>forward/store!, <a href="#forward">Forwarding Requests</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>get-all-published, <a href="#html">Publishing Procedures</a></dt><dt>get-bindings, <a href="#extracting-bindings">Extracting Bindings</a></dt><dt>get-published, <a href="#html">Publishing Procedures</a></dt><dt>graphviz/get-layout-command, <a href="#send-graphviz">Graphviz Procedures</a></dt><dt>graphviz/put-layout-command!, <a href="#send-graphviz">Graphviz Procedures</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>jdbc/call/conn, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/call/tran, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/call-with-connection, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/call-with-transaction, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/close-connection, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/get-connection, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/get-vendor, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/load-driver, <a href="#jdbc">JDBC Functions</a></dt><dt>jdbc/open-connection, <a href="#jdbc">JDBC Functions</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>let-bindings, <a href="#extracting-bindings">Extracting Bindings</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>oracle/read-blob, <a href="#oracle">Oracle</a></dt><dt>oracle/write-blob, <a href="#oracle">Oracle</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>publish, <a href="#html">Publishing Procedures</a></dt><dt>publish/regexp, <a href="#html">Publishing Procedures</a></dt><dt>publish/wildcard, <a href="#html">Publishing Procedures</a></dt><dt>publish-bulk, <a href="#html">Publishing Procedures</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>request/get-auth-type, <a href="#request">Request Procedures</a></dt><dt>request/get-character-encoding, <a href="#request">Request Procedures</a></dt><dt>request/get-content-length, <a href="#request">Request Procedures</a></dt><dt>request/get-content-type, <a href="#request">Request Procedures</a></dt><dt>request/get-cookies, <a href="#request">Request Procedures</a></dt><dt>request/get-date-header, <a href="#request">Request Procedures</a></dt><dt>request/get-dispatcher, <a href="#request">Request Procedures</a></dt><dt>request/get-header, <a href="#request">Request Procedures</a></dt><dt>request/get-header-alist, <a href="#request">Request Procedures</a></dt><dt>request/get-header-hashtable, <a href="#request">Request Procedures</a></dt><dt>request/get-header-names, <a href="#request">Request Procedures</a></dt><dt>request/get-init-parameter-names, <a href="#context">ServletContext Procedures</a></dt><dt>request/get-int-header, <a href="#request">Request Procedures</a></dt><dt>request/get-java-attribute, <a href="#request">Request Procedures</a></dt><dt>request/get-java-attribute-names, <a href="#request">Request Procedures</a></dt><dt>request/get-locale, <a href="#request">Request Procedures</a></dt><dt>request/get-locales, <a href="#request">Request Procedures</a></dt><dt>request/get-method, <a href="#request">Request Procedures</a></dt><dt>request/get-parameter, <a href="#request">Request Procedures</a></dt><dt>request/get-parameter-alist, <a href="#request">Request Procedures</a></dt><dt>request/get-parameter-hashtable, <a href="#request">Request Procedures</a></dt><dt>request/get-parameter-names, <a href="#request">Request Procedures</a></dt><dt>request/get-parameter-values, <a href="#request">Request Procedures</a></dt><dt>request/get-path-info, <a href="#request">Request Procedures</a></dt><dt>request/get-path-translated, <a href="#request">Request Procedures</a></dt><dt>request/get-protocol, <a href="#request">Request Procedures</a></dt><dt>request/get-query-string, <a href="#request">Request Procedures</a></dt><dt>request/get-remote-addr, <a href="#request">Request Procedures</a></dt><dt>request/get-remote-host, <a href="#request">Request Procedures</a></dt><dt>request/get-remote-user, <a href="#request">Request Procedures</a></dt><dt>request/get-requested-session-id, <a href="#request">Request Procedures</a></dt><dt>request/get-scheme, <a href="#request">Request Procedures</a></dt><dt>request/get-server-name, <a href="#request">Request Procedures</a></dt><dt>request/get-server-port, <a href="#request">Request Procedures</a></dt><dt>request/get-servlet-path, <a href="#request">Request Procedures</a></dt><dt>request/get-session, <a href="#request">Request Procedures</a></dt><dt>request/get-uri, <a href="#request">Request Procedures</a></dt><dt>request/get-url, <a href="#request">Request Procedures</a></dt><dt>request/get-user-principal, <a href="#request">Request Procedures</a></dt><dt>request/open-binary-input-port, <a href="#request">Request Procedures</a></dt><dt>request/open-input-port, <a href="#request">Request Procedures</a></dt><dt>request/remove-java-attribute!, <a href="#request">Request Procedures</a></dt><dt>request/requested-session-id-valid?, <a href="#request">Request Procedures</a></dt><dt>request/secure?, <a href="#request">Request Procedures</a></dt><dt>request/send-error, <a href="#response">Response Procedures</a></dt><dt>request/send-redirect, <a href="#response">Response Procedures</a></dt><dt>request/session-id-from-cookie?, <a href="#request">Request Procedures</a></dt><dt>request/session-id-from-url?, <a href="#request">Request Procedures</a></dt><dt>request/set-buffer-size!, <a href="#response">Response Procedures</a></dt><dt>request/set-character-encoding!, <a href="#request">Request Procedures</a></dt><dt>request/set-content-length!, <a href="#response">Response Procedures</a></dt><dt>request/set-content-type!, <a href="#response">Response Procedures</a></dt><dt>request/set-java-attribute!, <a href="#request">Request Procedures</a></dt><dt>request/user-in-role?, <a href="#request">Request Procedures</a></dt><dt>response/add-cookie!, <a href="#response">Response Procedures</a></dt><dt>response/add-header!, <a href="#response">Response Procedures</a></dt><dt>response/add-headers!, <a href="#response">Response Procedures</a></dt><dt>response/commit!, <a href="#response">Response Procedures</a></dt><dt>response/committed?, <a href="#response">Response Procedures</a></dt><dt>response/contains-header?, <a href="#response">Response Procedures</a></dt><dt>response/encode-redirect-url, <a href="#response">Response Procedures</a></dt><dt>response/encode-url, <a href="#response">Response Procedures</a></dt><dt>response/get-buffer-size, <a href="#response">Response Procedures</a></dt><dt>response/get-character-encoding, <a href="#response">Response Procedures</a></dt><dt>response/get-locale, <a href="#response">Response Procedures</a></dt><dt>response/open-binary-output-port, <a href="#response">Response Procedures</a></dt><dt>response/open-output-port, <a href="#response">Response Procedures</a></dt><dt>response/reset!, <a href="#response">Response Procedures</a></dt><dt>response/reset-buffer!, <a href="#response">Response Procedures</a></dt><dt>response/set-header!, <a href="#response">Response Procedures</a></dt><dt>response/set-locale!, <a href="#response">Response Procedures</a></dt><dt>response/set-status!, <a href="#response">Response Procedures</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>send-error/back, <a href="#errors">HTTP errors</a></dt><dt>send-error/finish, <a href="#errors">HTTP errors</a></dt><dt>send-forward/back, <a href="#forward">Forwarding Requests</a></dt><dt>send-forward/finish, <a href="#forward">Forwarding Requests</a></dt><dt>send-forward/forward, <a href="#forward">Forwarding Requests</a></dt><dt>send-forward/suspend, <a href="#forward">Forwarding Requests</a></dt><dt>send-graphviz/back, <a href="#send-graphviz">Graphviz Procedures</a></dt><dt>send-graphviz/finish, <a href="#send-graphviz">Graphviz Procedures</a></dt><dt>send-html/back, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-html/finish, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-html/forward, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-html/suspend, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-image/back, <a href="#image">Images</a></dt><dt>send-image/finish, <a href="#image">Images</a></dt><dt>send-image-file/back, <a href="#image">Images</a></dt><dt>send-image-file/finish, <a href="#image">Images</a></dt><dt>send-text/back, <a href="#send-text">Plain Text</a></dt><dt>send-text/finish, <a href="#send-text">Plain Text</a></dt><dt>send-text/forward, <a href="#send-text">Plain Text</a></dt><dt>send-text/suspend, <a href="#send-text">Plain Text</a></dt><dt>send-xhtml/back, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-xhtml/finish, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-xhtml/forward, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-xhtml/suspend, <a href="#send-html">(X)HTML Core Procedures</a></dt><dt>send-xml/back, <a href="#send-xml">XML Core Procedures</a></dt><dt>send-xml/finish, <a href="#send-xml">XML Core Procedures</a></dt><dt>send-xml/forward, <a href="#send-xml">XML Core Procedures</a></dt><dt>send-xml/suspend, <a href="#send-xml">XML Core Procedures</a></dt><dt>session/get-creation-time, <a href="#session">Session Procedures</a></dt><dt>session/get-id, <a href="#session">Session Procedures</a></dt><dt>session/get-java-attribute, <a href="#session-parameters">State with the Session Object</a>, <a href="#session">Session Procedures</a></dt><dt>session/get-java-attribute-names, <a href="#session">Session Procedures</a></dt><dt>session/get-last-accessed-time, <a href="#session">Session Procedures</a></dt><dt>session/get-max-inactive-interval, <a href="#session">Session Procedures</a></dt><dt>session/get-servlet-context, <a href="#session">Session Procedures</a></dt><dt>session/invalidate!, <a href="#session">Session Procedures</a></dt><dt>session/make-parameter, <a href="#session-parameters">State with the Session Object</a>, <a href="#session">Session Procedures</a></dt><dt>session/new?, <a href="#session">Session Procedures</a></dt><dt>session/remove-java-attribute!, <a href="#session">Session Procedures</a></dt><dt>session/set-java-attribute!, <a href="#session">Session Procedures</a></dt><dt>session/set-max-inactive-interval!, <a href="#session">Session Procedures</a></dt><dt>sql/execute, <a href="#queries">Running Queries</a></dt><dt>sql/execute-query, <a href="#queries">Running Queries</a></dt><dt>sql/execute-update, <a href="#queries">Running Queries</a></dt><dt>sql/for-each-row, <a href="#queries">Running Queries</a></dt><dt>sql/map-row, <a href="#queries">Running Queries</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>unpublish, <a href="#html">Publishing Procedures</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>webcell/make, <a href="#webcells">State with Web Cells</a></dt><dt>webcell/make-parameter, <a href="#webcells">State with Web Cells</a></dt><dt>webcell/ref, <a href="#webcells">State with Web Cells</a></dt><dt>webcell/set!, <a href="#webcells">State with Web Cells</a></dt></dl></div></div></div></div></body></html>